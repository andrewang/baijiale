{"version":3,"sources":["../../../../../../../../assets/scripts/app/game/view/SingleResult/assets/scripts/app/game/view/SingleResult/SingleResultView.js"],"names":["BaseView","require","cc","Class","extends","properties","moduleName","override","default","visible","onLoad","_super","setData","data","i","find","node","active","owner_win_jetton","color","Color","WHITE","fromHEX","string","user_win_list","length","info","seatData","gameMgr","getSeatDataByUID","uid","user_base_info","itemJs","clone","point","win_jetton","cardList","view","num","js","getCardNum","type","getCardType","resMgr","updateSprite","getCardResResultName","xianList","zhuangList","xianPoint","zhuangPoint","xp","zp"],"mappings":"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","file":"SingleResultView.js","sourceRoot":"../../../../../../../../assets/scripts/app/game/view/SingleResult","sourcesContent":["//单局结算只有房主才会弹\nvar BaseView = require(\"BaseView\")\n\ncc.Class({\n    extends: BaseView,\n\n    properties: {\n        moduleName: {\n            override: true,\n            default: \"SingleResult\",\n            visible: false,\n        },\n\n    },\n\n    onLoad: function () {\n        this._super()\n        // this.init()\n    },\n\n    setData: function (data) {\n        for (var i = 1; i <= 9; i++) {\n            this.find(\"player\" + i).node.active = false\n        }\n\n        // this.find(\"txtMyTotalPoint\").string = \"总计: \" + data.owner_win_jetton\n        if (data.owner_win_jetton >= 0) {\n            this.find(\"txtMyTotalPoint\").node.color = cc.Color.WHITE.fromHEX(\"#FFF568\")\n            this.find(\"txtMyTotalPoint\").string = \"+\" + data.owner_win_jetton\n        } else {\n            this.find(\"txtMyTotalPoint\").node.color = cc.Color.WHITE.fromHEX(\"#ED1C24\")\n            this.find(\"txtMyTotalPoint\").string = data.owner_win_jetton\n        }\n        for (var i = 0; i < data.user_win_list.length; i++) {\n            var info = data.user_win_list[i] //{uid, win_jetton}\n            var seatData = cc.gameMgr.getSeatDataByUID(info.uid) //{seat, user_base_info}\n            var user_base_info = seatData.user_base_info //{uid, name, avatar, gender, diamonds}\n            var itemJs = this.find(\"player\" + (i + 1))\n            itemJs.setData({ user_base_info: clone(user_base_info), point: info.win_jetton })\n            itemJs.node.active = true\n        }\n\n        var cardList = cc.gameMgr.view.cardList\n        for (var i = 1; i <= 6; i++) {\n            var num = cardList[i].js.getCardNum()\n            var type = cardList[i].js.getCardType()\n            this.find(\"nodeCard\" + i).active = (num != 0)\n            if (num != 0) {\n                cc.resMgr.updateSprite(this.find(\"card\" + i), cc.resMgr.getCardResResultName({type : type, num : num}))\n            }\n        }\n        var xianList = [cardList[1], cardList[2], cardList[5]]\n        var zhuangList = [cardList[3], cardList[4], cardList[6]]\n        var xianPoint = 0\n        var zhuangPoint = 0\n        for (var i = 0; i < xianList.length; i++) {\n            var num = xianList[i].js.getCardNum()\n            if (num >= 10) {\n                num = 0\n            }\n            xianPoint += num\n        }\n        for (var i = 0; i < zhuangList.length; i++) {\n            var num = zhuangList[i].js.getCardNum()\n            if (num >= 10) {\n                num = 0\n            }\n            zhuangPoint += num\n        }\n        this.find(\"txtPointXian\").string = (xianPoint % 10)\n        this.find(\"txtPointZhuang\").string = (zhuangPoint % 10)\n\n        var xp = xianPoint % 10\n        var zp = zhuangPoint % 10\n        this.find(\"win_zhuang\").node.active = false\n        this.find(\"win_xian\").node.active = false\n        this.find(\"win_he\").node.active = false\n        if (xp == zp) {\n            this.find(\"win_he\").node.active = true\n        } else if (xp > zp) {\n            this.find(\"win_xian\").node.active = true\n        } else {\n            this.find(\"win_zhuang\").node.active = true\n        }\n    },\n});\n"]}