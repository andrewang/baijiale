{"version":3,"sources":["../../../../../../assets/scripts/common/musicMgr/assets/scripts/common/musicMgr/MusicMgr.js"],"names":["prefix","cc","Class","extends","Component","properties","ctor","effectVolume","sys","localStorage","getItem","Number","musicVolume","init","playEffect","name","isLoop","audioEngine","play","url","raw","playMusic","bgmId","playVoice","log","setEffectVolume","saveEffectVolume","setItem","getEffectVolume","setMusicVolume","setVolume","saveMusicVolume","getMusicVolume","playResultEffect","ret","tableNums","state_info","state_list","indexOf","stop","audioId","playLobbyBgm","lobbyBgmId","stopLobbyBgm"],"mappings":"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","file":"MusicMgr.js","sourceRoot":"../../../../../../assets/scripts/common/musicMgr","sourcesContent":["var prefix = \"resources/music/\"\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n\n    },\n\n    ctor: function () {\n        //策划说默认0.5\n        this.effectVolume = cc.sys.localStorage.getItem('effectVolume') || 0.5\n        this.effectVolume = Number(this.effectVolume)\n        this.musicVolume = cc.sys.localStorage.getItem('musicVolume') || 0.5\n        this.musicVolume = Number(this.musicVolume)\n    },\n\n    init: function () {\n        \n    },\n\n    playEffect: function (name, isLoop) {\n        isLoop = isLoop || false\n        return cc.audioEngine.play(cc.url.raw(prefix + name), isLoop, this.effectVolume)\n    },\n\n    playMusic: function (name) {\n        this.bgmId = cc.audioEngine.play(cc.url.raw(prefix + name), true, this.musicVolume)\n        return this.bgmId\n    },\n\n    //播放语音\n    playVoice: function (name) {\n        cc.log(\"播放语音\", name)\n        return cc.audioEngine.play(name, false, this.effectVolume)\n    },\n\n    //音量\n    setEffectVolume: function (effectVolume) {\n        this.effectVolume = effectVolume\n        // cc.audioEngine.setEffectsVolume(this.effectVolume)\n    },\n\n    saveEffectVolume: function () {\n        cc.sys.localStorage.setItem(\"effectVolume\", this.effectVolume)\n    },\n\n    getEffectVolume: function () {\n        return this.effectVolume\n    },\n    \n    //音乐\n    setMusicVolume: function (musicVolume) {\n        this.musicVolume = musicVolume\n        cc.audioEngine.setVolume(this.bgmId, this.musicVolume)\n    },\n\n    saveMusicVolume: function () {\n        cc.sys.localStorage.setItem(\"musicVolume\", this.musicVolume)\n    },\n\n    getMusicVolume: function () {\n        return this.musicVolume\n    },\n\n    playResultEffect: function (ret) {\n        if (0 == tableNums(ret.state_info)) {\n            return\n        }\n        if (-1 != ret.state_info.state_list.indexOf(1)) {\n            this.playEffect(\"result_zhuang_win.mp3\")\n        }\n        else if (-1 != ret.state_info.state_list.indexOf(2)) {\n            this.playEffect(\"result_xian_win.mp3\")\n        }\n        else if (-1 != ret.state_info.state_list.indexOf(3)) {\n            this.playEffect(\"result_he.mp3\")\n        }\n    },\n\n    stop: function (audioId) {\n        if (audioId != null) {\n            cc.audioEngine.stop(audioId)\n        }\n    },\n\n    playLobbyBgm: function () {\n        this.lobbyBgmId = this.playMusic(\"lobby_music.mp3\")\n    },\n\n    stopLobbyBgm: function () {\n      this.stop(this.lobbyBgmId)  \n    },\n\n});\n"]}