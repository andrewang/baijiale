{"version":3,"sources":["../../../../../../../assets/scripts/app/game/player/assets/scripts/app/game/player/Player.js"],"names":["BaseObj","require","stateEnmu","record","cc","Class","extends","properties","onLoad","_super","pb_timer","find","optional","txtName","imgIcon","picture_frame","txtGold","pb","getComponent","ProgressBar","hideTimer","betTotalValue","node","on","Node","EventType","TOUCH_END","touch","IS_EXAMINE","gUserData","roomInfo","room_setup_info","midway_join","room_status","view","gameMgr","openView","setData","clone","data","bind","Animation","active","init","clientSeatId","imgBubble","_name","string","reset","chipList","i","musicMgr","stop","timerAudioId","getTotalChipValue","totalValue","j","length","chip","value","getValue","getTotalChipValueArea","area","seatData","nameString","user_base_info","name","getNameStringCount","substr","resMgr","loadNetUrl","Sprite","avatar","getClientSeatId","isRoomOwner","color","Color","WHITE","fromHEX","setContentSize","width","height","bar","setGoldNum","num","Math","floor","parseFloat","abs","updateGoldNum","offset","Number","getUid","uid","setChipsOnArea","gameView","chipValueArr","nodeChip","nodeChip1","nodeChip2","push","destroy","k","addSmallChip","parent","getPlayerBetParent","instantiate","res","updateChipTxtNum","setLocalZOrder","clearAllSmallChip","totalBetNumList","updateTotalBetInfo","areaName","nodeName","txtNum","smChip","chipSettle","state_info","isMiddle","self","tableNums","getPlayerPos","log","pos","position","worldPos","convertToWorldSpaceAR","localPos","convertToNodeSpaceAR","begin","end","getChipLayout","isOther","areaList","layout_other","layout_my","layout","move","obj","beginPos","endPos","callback","stopAllActions","dis","pDistance","time","ceil","moveTo","cb","callFunc","seq","sequence","runAction","cloneLayoutAndMove","newNode","newLayout","addComponent","Layout","type","resizeMode","spacingY","verticalDirection","scale","getContentSize","_anchorPoint","removeFromParent","addChild","chipArr","state_list","indexOf","setBetInfo","info","state_bet","bet","jetton","state","showBubble","delayTime","txtContent","getChildByName","imgEmoji","voiceEffect","updateSprite","words","play","getInstance","downloadVoice","wordsStr","playVoice","playEffect","Label","size","timeInterval","detalTime","progress","director","getScheduler","unschedule","tmpInterval","leftTime","totalTime","isBetState","game_status","BETTING","BETTING_DELAY","launchTimer","schedule","showMoveFirstTips","sys","localStorage","getItem","setItem","hideoveFirstTips","playChipFallAni","aniWin","avatarAnimation","avatarParticle","resetSystem","avatarAnimationUp","showCanMovePowerObjAni","opacity"],"mappings":"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","file":"Player.js","sourceRoot":"../../../../../../../assets/scripts/app/game/player","sourcesContent":["var BaseObj = require(\"BaseObj\")\nvar stateEnmu = require(\"GameConfig\").stateEnmu\nvar record = require(\"RecordMgr\")\ncc.Class({\n    extends: BaseObj,\n\n    properties: {\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        this._super()\n\n        this.pb_timer = this.find(\"pb_timer\")\n        this.optional = this.find(\"optional\")\n        this.txtName = this.find(\"txtName\")\n        this.imgIcon = this.find(\"imgIcon\")\n        this.picture_frame = this.find(\"picture_frame\")\n        this.txtGold = this.find(\"txtGold\")\n        this.pb = this.pb_timer.getComponent(cc.ProgressBar)\n        this.hideTimer()\n        this.betTotalValue = 0 //这盘下注的总额\n        //空座位邀请好友\n        this.find(\"nodeNoPlayer\").node.on(cc.Node.EventType.TOUCH_END, function (touch) {\n            if (IS_EXAMINE) {\n                return\n            }\n            //允许中途加入才需要邀请  或者  游戏未开始\n            if (1 == gUserData.roomInfo.room_setup_info.midway_join || \"wait\" == gUserData.roomInfo.room_status) {\n                var view = cc.gameMgr.view.openView(\"prefabs/share/InvitationView\")\n            }\n        }, this)\n        this.imgIcon.on(cc.Node.EventType.TOUCH_END, function (touch) {\n            var view = cc.gameMgr.view.openView(\"prefabs/player/PlayerInfoView\")\n            view.setData(clone(this.data))\n        }.bind(this), this)\n        this.find(\"aniWin\").getComponent(cc.Animation).on('stop', function () {\n            this.find(\"aniWin\").active = false\n            this.find(\"avatarAnimation\").active = false\n        }, this)\n    },\n\n    init: function (clientSeatId) {\n        this.find(\"nodeNoPlayer\").node.active = true\n        this.find(\"nodePlayer\").active = false\n        this.find(\"optional\").active = false\n        // this.find(\"imgBubble\").active = false\n        this.imgBubble = cc.gameMgr.view.find(this.node._name + \"_imgBubble\")\n        this.imgBubble.active = false\n        this.clientSeatId = clientSeatId\n        this.data = null\n        this.find(\"txtGold\").string = 0\n        this.find(\"aniWin\").active = false\n        this.find(\"avatarAnimation\").active = false\n        this.reset()\n    },\n\n    reset: function () {\n        // this.showZhuangTag(false)\n        // this.showXianTag(false)\n        //该玩家下注的所有筹码\n        this.chipList = {}\n        for (var i = 1; i <= 5; i++) {\n            this.chipList[i] = []\n        }\n        this.betTotalValue = 0\n        cc.musicMgr.stop(this.timerAudioId)\n        this.timerAudioId = null\n    },\n\n    //获取玩家下注的筹码总量\n    getTotalChipValue: function () {\n        var totalValue = 0\n        for (var i = 1; i <= 5; i++) {\n            for (var j = 0; j < this.chipList[i].length; j++) {\n                var chip = this.chipList[i][j]\n                var value = chip.getComponent(\"ChipSmall\").getValue()\n                totalValue += value\n            }\n        }\n        return totalValue\n    },\n\n    getTotalChipValueArea: function (area) {\n        var totalValue = 0\n        for (var j = 0; j < this.chipList[area].length; j++) {\n            var chip = this.chipList[area][j]\n            var value = chip.getComponent(\"ChipSmall\").getValue()\n            totalValue += value\n        }\n        return totalValue\n    },\n\n    //seatData {seat, user_base_info}\n    setData: function (seatData) {\n        this.find(\"nodeNoPlayer\").node.active = false\n        this.find(\"nodePlayer\").active = true\n\n        this.data = seatData\n        var nameString = /*seatData.user_base_info.uid + */seatData.user_base_info.name\n        if (this.getNameStringCount(nameString) > 10)   //最多容纳5个汉字\n        {\n            nameString = nameString.substr(0, this.getNameStringCount(nameString,8)) + \"..\"  //大于5个汉字,取前4个汉子字符加..表示\n        }\n        this.txtName.string = nameString\n        // this.find(\"txtGold\").string = seatData.user_base_info.diamonds\n        cc.resMgr.loadNetUrl(this.imgIcon.getComponent(cc.Sprite), seatData.user_base_info.avatar)\n\n        //一号位玩家是房主还是玩家的显示区别\n        if (1 == this.getClientSeatId()) {\n            if (cc.gameMgr.isRoomOwner()) {\n                this.txtName.node.color = cc.Color.WHITE.fromHEX(\"#C0DBFB\")\n                // this.txtName.node.color = cc.Color.YELLOW\n                this.find(\"mask\").setContentSize({ width: 96, height: 96 })\n                this.imgIcon.setContentSize({ width: 96, height: 96 })\n                this.pb_timer.bar.node.setContentSize({ width: 104, height: 104 })\n                this.pb_timer.setContentSize({ width: 104, height: 104 })\n                this.picture_frame.node.setContentSize({ width: 102, height: 102 })\n            } else {\n                this.txtName.node.color = cc.Color.WHITE.fromHEX(\"#00FFFF\")\n                // this.txtName.node.color = cc.Color.BLUE\n                this.find(\"mask\").setContentSize({ width: 108, height: 108 })\n                this.imgIcon.setContentSize({ width: 108, height: 108 })\n                this.pb_timer.bar.node.setContentSize({ width: 116, height: 116 })\n                this.pb_timer.setContentSize({ width: 112, height: 112 })\n                this.picture_frame.node.setContentSize({ width: 114, height: 114 })\n            }\n        }\n        //自身是房主，名字也要变色\n        if (0 == this.getClientSeatId() && cc.gameMgr.isRoomOwner()) {\n            this.txtName.node.color = cc.Color.WHITE.fromHEX(\"#00FFFF\")\n        }\n    },\n\n    setGoldNum: function (num) {\n        //取整\n        //num = '-1088.00'\n        num = Math.floor(num)\n        if (num == 0)           //很无奈，不知道为什么在模拟器上会显示成0.00，故做特殊处理\n        {\n            this.txtGold.string = 0\n        }\n        else if (num > 0) {\n            this.txtGold.string = parseFloat(num)  //去除小数点后面多余的0\n        }\n        else\n        {\n            num = Math.abs(num)                     //取绝对值\n            this.txtGold.string = \"-\" + parseFloat(num)\n        }\n        \n    },\n\n    //更新筹码数量\n    updateGoldNum: function (offset) {\n        this.setGoldNum(Number(this.txtGold.string) + offset)\n    },\n\n    getUid: function () {\n        return this.data.user_base_info.uid\n    },\n\n    getClientSeatId: function () {\n        return this.clientSeatId\n    },\n\n    setChipsOnArea: function (totalValue, area) {\n        var gameView = cc.gameMgr.view\n        var chipValueArr = []\n        var nodeChip = null\n        if (true == gameView.nodeChip1.active) {\n            nodeChip = gameView.nodeChip1\n        }\n        else {\n            nodeChip = gameView.nodeChip2\n        }\n        for (var i = 5; i >= 1; i--) {\n            chipValueArr.push(Number(nodeChip[\"chip\" + i].value.string))\n        }\n\n        //清除\n        for (var i = 0; i < this.chipList[area].length; i++) {\n            var chip = this.chipList[area][i]\n            var value = chip.getComponent(\"ChipSmall\").getValue()\n            this.updateGoldNum(value)\n            chip.getComponent(\"ChipSmall\").node.destroy()\n        }\n        this.chipList[area] = []\n\n        for (var j = 0; j < chipValueArr.length; j++) {\n            var value = chipValueArr[j]\n            if (totalValue % value < totalValue) {\n                var num = Math.floor(totalValue / value)\n                for (var k = 1; k <= num; k++) {\n                    var chip = this.addSmallChip(value, area)\n                    var parent = gameView.getPlayerBetParent(this.getClientSeatId(), area)\n                    chip.parent = parent\n                }\n                totalValue = totalValue % value\n            }\n        }\n    },\n\n    //增加一个筹码 value筹码的额 area下注的区域1庄 2闲 3和 4庄对 5闲对\n    addSmallChip: function (value, area) {\n        var chip = cc.instantiate(cc.res[\"prefabs/chip/ChipSmall\"])\n        //这里要用getConponents，不能直接用.js,因为onload此时还没执行\n        chip.getComponent(\"ChipSmall\").setData({ value: value, area: area, seatData: this.data, clientSeatId: this.clientSeatId })\n        this.chipList[area].push(chip)\n        if (this.data) {\n            this.updateChipTxtNum()\n            this.updateGoldNum(-value)\n        }\n        //策划说筹码值越小的，放在最上面\n        chip.setLocalZOrder(-value)\n        this.betTotalValue = this.getTotalChipValue()\n        return chip\n    },\n\n    //清除所有筹码\n    clearAllSmallChip: function () {\n        for (var i = 1; i <= 5; i++) {\n            for (var j = 0; j < this.chipList[i].length; j++) {\n                var chip = this.chipList[i][j]\n                var value = chip.getComponent(\"ChipSmall\").getValue()\n                this.updateGoldNum(value)\n                cc.gameMgr.totalBetNumList[i] -= value\n                chip.getComponent(\"ChipSmall\").node.destroy()\n            }\n        }\n        //更新房主筹码统计\n        cc.gameMgr.view.updateTotalBetInfo()\n        this.chipList = {}\n        for (var i = 1; i <= 5; i++) {\n            this.chipList[i] = []\n        }\n        if (this.data) {\n            this.updateChipTxtNum()\n        }\n    },\n\n    //更新自己各筹码区域的筹码总额（这里的自己指客户端1号位的那个人）\n    updateChipTxtNum: function () {\n        if (this.getUid() != gUserData.uid) {\n            return\n        }\n        var areaName = {}\n        areaName[1] = \"zhuang1\"\n        areaName[2] = \"xian1\"\n        areaName[3] = \"he\"\n        areaName[4] = \"zhuangdui\"\n        areaName[5] = \"xiandui\"\n        var gameView = cc.gameMgr.view\n        for (var i = 1; i <= 5; i++) {\n            var nodeName = areaName[i]\n            // var txtNum = gameView.find(nodeName).txtNum\n            var txtNum = gameView[nodeName].txtNum\n            txtNum.node.active = (this.chipList[i].length != 0)\n            var totalValue = 0\n            for (var j = 0; j < this.chipList[i].length; j++) {\n                var smChip = this.chipList[i][j]\n                totalValue += smChip.getComponent(\"ChipSmall\").getValue()\n            }\n            txtNum.string = totalValue\n        }\n    },\n\n    //筹码结算，移动到房主或者移动到自己\n    //(1:庄，2:闲，3:和，4:庄对，5:闲对，6:庄方天牌，7:闲方天牌) isMiddle是否中途结算\n    chipSettle: function (state_info, isMiddle) {\n        var self = this\n        if (0 == tableNums(state_info)) {\n            return\n        }\n        var gameView = cc.gameMgr.view\n        var self = this\n        function getPlayerPos(name, chip) {\n            if (!gameView.find(name)) {\n                cc.log(\"@@@@@error:\", name)\n            }\n            var pos = gameView.find(name).node.position\n            var worldPos = gameView.node.convertToWorldSpaceAR(pos)\n            // var layoutNode = chip.getComponent(\"ChipSmall\").node.parent\n            //下注区域图片的节点,这个节点跟玩家的节点都保持统一结构，这样转换位置才有意义\n            // var areaNode = layoutNode.parent\n            // var localPos = areaNode.convertToNodeSpaceAR(worldPos)\n            var localPos = cc.gameMgr.view.find(\"nodeBetMove\").convertToNodeSpaceAR(worldPos)\n            return localPos\n        }\n        //中途结算会结算庄对和闲对的\n        var begin, end\n        if (isMiddle) {\n            begin = 4\n            end = 5\n        }\n        else {\n            begin = 1\n            end = 3\n            // end = 5\n        }\n\n        function getChipLayout(area, isOther) {\n            var areaList = {}\n            // areaList[1] = \"zhuang1\"\n            // areaList[2] = \"xian1\"\n            areaList[1] = \"zhuang\" + self.getClientSeatId()\n            areaList[2] = \"xian\" + self.getClientSeatId()\n            areaList[3] = \"he\"\n            areaList[4] = \"zhuangdui\"\n            areaList[5] = \"xiandui\"\n            var node = cc.gameMgr.view.find(areaList[area])\n            if (area >= 3) {\n                if (isOther) {\n                    return node.layout_other\n                } else {\n                    return node.layout_my\n                }\n            } else {\n                return node.layout\n            }\n        }\n\n        function move(obj, beginPos, endPos, callback) {\n            obj.stopAllActions()\n            var dis = cc.pDistance(beginPos, endPos)\n            var time = Math.ceil(dis / 100) * 0.1\n            var moveTo = cc.moveTo(time, endPos)\n            var cb = cc.callFunc(function () {\n                if (callback) {\n                    callback()\n                }\n            })\n            var seq = cc.sequence(moveTo, cb)\n            obj.runAction(seq)\n        }\n\n        //拷贝筹码的layout代替旧的layout，旧的layout移动后销毁\n        function cloneLayoutAndMove(i, pos, isOther) {\n            var layout = getChipLayout(i, isOther)\n            var worldPos = layout.node.parent.convertToWorldSpaceAR(layout.node.position)\n            var localPos = cc.gameMgr.view.find(\"nodeBet\").convertToNodeSpaceAR(worldPos)\n\n            var name = layout.node._name\n            var newNode = new cc.Node(name)\n            var newLayout = newNode.addComponent(cc.Layout)\n            newLayout.type = layout.type\n            newLayout.resizeMode = layout.resizeMode\n            newLayout.spacingY = layout.spacingY\n            newLayout.verticalDirection = layout.verticalDirection\n            newLayout.node.scale = layout.node.scale\n            newNode.setContentSize(layout.node.getContentSize())\n            newLayout.node._anchorPoint = layout.node._anchorPoint\n            newLayout.node.position = layout.node.position\n            var parent = layout.node.parent\n            layout.node.removeFromParent()\n            parent.addChild(newNode)\n            //因为调用了bindUiNode的缘故，新节点替换旧节点，所以这里要改变node的索引\n            parent[name] = newLayout\n            // if (parent.layout) {\n            //     parent.layout = newLayout\n            // }\n            // if (parent.layout_my) {\n            //     parent.layout_my = newLayout\n            // }\n            cc.gameMgr.view.find(\"nodeBetMove\").addChild(layout.node)\n            layout.node.position = localPos\n            move(layout.node, localPos, pos, function () {\n                layout.node.destroy()\n            })\n        }\n\n        for (var i = begin; i <= end; i++) {\n            var chipArr = this.chipList[i]\n            var pos\n            //和局也是移向自己的\n            if (-1 != state_info.state_list.indexOf(i) || -1 != state_info.state_list.indexOf(3)) {\n                // for (var k in chipArr) {\n                //     var chip = chipArr[k]\n                //     var pos = getPlayerPos(\"player\" + this.clientSeatId, chip)\n                //     chip.getComponent(\"ChipSmall\").settle(pos)\n                //     //玩家赢了复制一份筹码出来移动\n                //     // var chipClone = cc.instantiate(cc.res[\"prefabs/chip/ChipSmall\"])\n                //     // chipClone.getComponent(\"ChipSmall\").setData(chip.getComponent(\"ChipSmall\").getValue())\n                //     // var parent = gameView.getPlayerBetParent(this.getClientSeatId(), i)\n                //     // chipClone.parent = parent\n                //     // chipClone.position = {x:50, y:0}\n                //     // chipClone.getComponent(\"ChipSmall\").settle(pos)\n                // }\n                pos = getPlayerPos(\"player\" + this.clientSeatId)\n            } else {\n                // for (var k in chipArr) {\n                //     var chip = chipArr[k]\n                //     var pos = getPlayerPos(\"player0\", chip)\n                //     chip.getComponent(\"ChipSmall\").settle(pos)\n                // }\n                pos = getPlayerPos(\"player0\")\n            }\n            cloneLayoutAndMove(i, pos)\n            //和 庄对 闲对还要处理别人的筹码\n            if (i >= 3) {\n                cloneLayoutAndMove(i, pos, true)\n            }\n            this.chipList[i] = []\n        }\n        if (this.data) {\n            this.updateChipTxtNum()\n        }\n    },\n\n    //重连的时候设置玩家下注状况\n    setBetInfo: function (info) {\n        var gameView = cc.gameMgr.view\n        var chipValueArr = []\n        for (var i = 5; i >= 1; i--) {\n            chipValueArr.push(Number(gameView.find(\"chip\" + i).value.string))\n        }\n\n        for (var i = 0; i < info.state_bet.length; i++) {\n            var bet = info.state_bet[i]\n            this.setChipsOnArea(bet.jetton, bet.state)\n        }\n    },\n\n    showBubble: function (data) {\n        var self = this\n        // var imgBubble = this.find(\"imgBubble\")\n        this.imgBubble.active = true\n        this.imgBubble.stopAllActions()\n        this.imgBubble.runAction(cc.sequence(cc.delayTime(2), cc.callFunc(function () {\n            self.imgBubble.active = false\n        })))\n\n        var txtContent = this.imgBubble.getChildByName(\"txtContent\")\n        var imgEmoji = this.imgBubble.getChildByName(\"imgEmoji\")\n        var voiceEffect = this.imgBubble.getChildByName(\"voiceEffect\").getComponent(cc.Animation)\n\n        txtContent.active = false\n        imgEmoji.active = false\n        //表情\n        if (3 == data.type) {\n            imgEmoji.active = true\n            this.imgBubble.setContentSize({ width: 94, height: 84 })\n            // this.find(\"imgEmoji\").spriteFrame = this.find(data.words).getComponent(cc.Sprite).spriteFrame\n            cc.resMgr.updateSprite(imgEmoji.getComponent(cc.Sprite), \"expression/\" + data.words)\n        }\n        else if (4 == data.type) {\n            //txtContent.active = true\n            //txtContent.getComponent(cc.Label).string = \"语音\"\n            //var size = txtContent.getContentSize()\n            this.imgBubble.setContentSize({ width: 90, height: 60 })\n            voiceEffect.play()\n            record.getInstance().downloadVoice(data.words)\n        }\n        else {\n            txtContent.active = true\n            var wordsStr = data.words\n            if (1 == data.type)     //常用语播放语音去除前两个字符\n            {\n                cc.log(\"showBubble  playVoice\")\n                if (this.getUid() != gUserData.uid) //不是自己才播放语音\n                {\n                    var playVoice = \"placeVoice/\" + wordsStr + \".mp3\"\n                    cc.log(\"playVoice: \", playVoice)\n                    cc.musicMgr.playEffect(playVoice)\n                }\n                wordsStr = wordsStr.substr(2)\n            }\n            txtContent.getComponent(cc.Label).string = wordsStr\n            var size = txtContent.getContentSize()\n            this.imgBubble.setContentSize({ width: size.width + 30, height: size.height + 20 })\n        }\n    },\n\n    timeInterval: function (detalTime) {\n        //傻逼creator模拟器不知道为什么退出房间的时候说this.pb为空，所以处理了一下\n        if (!this.pb || this.pb.progress <= 0) {\n            cc.director.getScheduler().unschedule(this.tmpInterval, this)\n            cc.musicMgr.stop(this.timerAudioId)\n            this.timerAudioId = null\n            this.tmpInterval = null\n            return\n        }\n        this.leftTime = this.leftTime - detalTime\n        this.pb.progress = this.leftTime / this.totalTime\n\n        var isBetState = function () {\n            var state = gUserData.roomInfo.game_status\n            return stateEnmu.BETTING == state || stateEnmu.BETTING_DELAY == state\n        }.bind(this)\n\n        //下注阶段最后5秒才需要播放滴滴滴的音效\n        if (this.leftTime <= 5.0 && !this.timerAudioId && isBetState()) {\n            this.timerAudioId = cc.musicMgr.playEffect(\"daojishi.mp3\", true)\n        }\n    },\n\n    launchTimer: function (leftTime, totalTime) {\n        if (!this.pb_timer) {\n            return\n        }\n        this.pb_timer.active = true\n        this.leftTime = leftTime\n        this.totalTime = totalTime\n        this.pb.progress = leftTime / totalTime\n        //模拟器或真机上，如果不判断句柄是否在调度，会报错，所以需要判断一下\n        if (this.tmpInterval) {\n            cc.director.getScheduler().unschedule(this.tmpInterval, this)\n            cc.musicMgr.stop(this.timerAudioId)\n            this.timerAudioId = null\n        }\n        this.tmpInterval = this.timeInterval\n        cc.director.getScheduler().schedule(this.tmpInterval, this, 0)\n    },\n\n    hideTimer: function () {\n        this.pb_timer.active = false\n        cc.musicMgr.stop(this.timerAudioId)\n        this.timerAudioId = null\n        if (this.find(\"firstTipsNode\"))\n            this.find(\"firstTipsNode\").active = false\n    },\n\n    showMoveFirstTips: function () {\n        if (cc.sys.localStorage.getItem(\"showMoveFirstTips\"))\n            return\n\n        cc.log(\"showMoveFirstTips\")\n        this.find(\"backGround\").getComponent(cc.Animation).play()\n        this.find(\"tipsLabelBackGround\").getComponent(cc.Animation).play()\n        this.find(\"firstTipsNode\").active = true\n        cc.sys.localStorage.setItem(\"showMoveFirstTips\", 1);\n    },\n\n    hideoveFirstTips: function () {\n        this.find(\"firstTipsNode\").active = false\n    },\n\n    //播放筹码掉落动画\n    playChipFallAni: function () {\n        var aniWin = this.find(\"aniWin\")\n        aniWin.active = true\n        aniWin.getComponent(cc.Animation).play()\n\n        var avatarAnimation = this.find(\"avatarAnimation\")\n        avatarAnimation.active =true\n        avatarAnimation.getComponent(cc.Animation).play()\n\n        var avatarParticle = this.find(\"avatarParticle\")\n        avatarParticle.resetSystem()\n\n        var avatarAnimationUp = this.find(\"avatarAnimationUp\")\n        avatarAnimationUp.getComponent(cc.Animation).play()\n    },\n\n    //可以转移挤牌权给其他人的动画\n    showCanMovePowerObjAni: function () {\n        this.optional.active = true\n        this.optional.opacity = 255\n        this.optional.getComponent(cc.Animation).play()\n    },\n});\n"]}