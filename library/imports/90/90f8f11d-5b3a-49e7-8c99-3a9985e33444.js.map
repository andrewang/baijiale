{"version":3,"sources":["../../../../../../assets/scripts/net/websocket/assets/scripts/net/websocket/NetMgr.js"],"names":["ProtoUtil","require","Code","CommonNetMgr","GameToAppHelper","cc","Class","extends","Component","properties","gate","get","_commonNetMgr","dataList","setIsReconnnect","isReconnect","log","close","initData","reconnect","next","onAppBack","onAppFront","login","_loginBack","request","name","msg","cb","setLoginCallBack","self","socket","code","initNetHandlers","on","ret","pushData","console","JSON","stringify","type","gameMgr","isRoomOwner","backToLobbyScene","common","showMsgBox","okCb","view","openView","setData","room_close_info","curJushu","bind","eventMgr","emit","ExitGame","isViewOnOpen","isForbidGame","push","handleData","data","removeByIndex","exec","func","OK","isRepetitionBar","sys","isBrowser","getCodeName","codeNumber","isCanShow"],"mappings":"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","file":"NetMgr.js","sourceRoot":"../../../../../../assets/scripts/net/websocket","sourcesContent":["var ProtoUtil = require(\"ProtoUtil\");\nvar Code = require(\"Code\");\n// var EventName = require('EventName');\nvar CommonNetMgr = require('CommonNetMgr');\nvar GameToAppHelper = require(\"GameToAppHelper\")\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        gate: {\n            get: function () {\n                return this._commonNetMgr.gate;\n            }\n        },\n\n        dataList: []\n    },\n\n    setIsReconnnect: function (isReconnect) {\n        if (!this._commonNetMgr) {\n            cc.log(\"_commonNetMgr closed\");\n            return\n        }\n        this._commonNetMgr.setIsReconnnect(isReconnect);\n    },\n\n    close: function (isReconnect) {\n        if (!this._commonNetMgr) {\n            cc.log(\"_commonNetMgr closed\");\n            return\n        }\n        if (isReconnect == false) {\n            this.setIsReconnnect(false);\n        }\n        this._commonNetMgr.close();\n        this._commonNetMgr = null;\n    },\n\n    // initData: function (uid, token, rid) {//初始化常用数据\n    //     this._commonNetMgr = new CommonNetMgr();\n    //     this._commonNetMgr.initData(uid, token, rid);\n    // },\n\n    initData: function () {//初始化常用数据\n        this._commonNetMgr = new CommonNetMgr();\n        this._commonNetMgr.initData();\n    },\n\n    reconnect: function (next) {\n\n    },\n\n    //应用退到后台\n    onAppBack: function () {\n        this.close(false)\n    },\n\n    //应用回到前台\n    onAppFront: function () {\n        cc.log(\"前台\", this._commonNetMgr)\n        if (null == this._commonNetMgr) {\n            this.initData()\n            this.login(this._loginBack)\n        }\n    },\n\n    // 发送网络请求\n    request: function (name, msg, cb) {\n        if (!this._commonNetMgr) {\n            cc.log(\"_commonNetMgr closed\");\n            return\n        }\n        this._commonNetMgr.request(name, msg, cb)\n    },\n\n    setLoginCallBack: function (next) {\n        this._loginBack = next;\n    },\n\n    login: function (next) {\n        // this._commonNetMgr = null;\n        // var commonNetMgr = new CommonNetMgr();\n        // commonNetMgr.init();\n        var self = this;\n        if (next) {\n            this.setLoginCallBack(next);\n        }\n        this._commonNetMgr.login(function (socket, code) {\n            if (socket) {\n                self.initNetHandlers(socket);\n                // self._commonNetMgr = commonNetMgr;\n                if (self._loginBack) {\n                    self._loginBack(true);\n                }\n                //next(true);\n            } else {\n                if (self._loginBack) {\n                    self._loginBack(false, code);\n                }\n                // next(false,err);\n                // console.log(err);\n            }\n        });\n    },\n\n    initNetHandlers: function (socket) {\n        if (!socket) {\n            // TODO:\n            return;\n        }\n        // // TODO:监听网络消息，dispatch消息\n        var self = this;\n        //响应解散房间\n        socket.on(\"on_room_close_launch\", function (ret) {\n            this.pushData(\"on_room_close_launch\", ret, function () {\n                console.log('on_room_close_launch:' + JSON.stringify(ret));\n                if (2 == ret.type) {\n                    //房主在解散房间时，直接返回到游戏大厅。\n                    if (cc.gameMgr.isRoomOwner()) {\n                        cc.gameMgr.backToLobbyScene()\n                    }\n                    //在房主解散房间时，其他玩家的页面里应该弹出“房主已解散房间”的提示，点击“确定”后返回到游戏大厅\n                    else {\n                        cc.common.showMsgBox({\n                            type: 2, msg: \"房主已解散房间\", okCb: function () {\n                                cc.gameMgr.backToLobbyScene()\n                            }\n                        })\n                    }\n                }\n                else if (1 == ret.type) {\n                    var view = cc.gameMgr.view.openView(\"prefabs/dismissRoom/DismissRoomView\")\n                    view.setData(ret.room_close_info)\n                }\n                else if (3 == ret.type) {\n                    if (cc.gameMgr.curJushu <= 1) {\n                        cc.common.showMsgBox({\n                            type: 2, msg: \"解散房间成功\", okCb: function () {\n                                cc.gameMgr.backToLobbyScene()\n                            }\n                        })\n                    }\n                    else {\n                        cc.common.showMsgBox({\n                            type: 2, msg: \"解散房间成功\", okCb: function () {\n\n                            }\n                        })\n                    }\n                }\n            })\n        }.bind(this))\n\n        //解散房间玩家选择\n        socket.on(\"on_room_close_affirm\", function (ret) {\n            this.pushData(\"on_room_close_affirm\", ret, function () {\n                console.log('on_room_close_affirm:', ret);\n                cc.eventMgr.emit(\"on_room_close_affirm\", ret)\n            })\n        }.bind(this))\n\n        //响应离开房间\n        socket.on(\"on_room_leave\", function (ret) {\n            this.pushData(\"on_room_leave\", ret, function () {\n                console.log('on_room_leave:', ret);\n                cc.eventMgr.emit(\"on_room_leave\", ret)\n            })\n        }.bind(this))\n\n        //响应加入房间\n        socket.on(\"on_room_join\", function (ret) {\n            this.pushData(\"on_room_join\", ret, function () {\n                console.log('on_room_join:', ret);\n                cc.eventMgr.emit(\"on_room_join\", ret)\n            })\n        }.bind(this))\n\n        //踢出游戏(抢号)\n        socket.on(\"on_user_kick\", function (ret) {\n            this.pushData(\"on_user_kick\", ret, function () {\n                console.log('on_user_kick:', ret);\n                cc.common.showMsgBox({\n                    type: 2, msg: \"您的账号已在其它设备登录！\", okCb: function () {\n                        //this.close(false)\n                        GameToAppHelper.ExitGame()\n                    }\n                })\n                //cc.director.loadScene(\"LoginScene\")\n            }.bind(this))\n        }.bind(this))\n\n        //游戏状态变化\n        socket.on(\"on_room_game_status_change\", function (ret) {\n            this.pushData(\"on_room_game_status_change\", ret, function () {\n                console.log('on_room_game_status_change:', ret);\n                cc.eventMgr.emit(\"on_room_game_status_change\", ret)\n            })\n        }.bind(this))\n\n        //切牌\n        socket.on(\"on_room_game_cut_cards\", function (ret) {\n            this.pushData(\"on_room_game_cut_cards\", ret, function () {\n                console.log('on_room_game_cut_cards:', ret);\n                cc.eventMgr.emit(\"on_room_game_cut_cards\", ret)\n            })\n        }.bind(this))\n\n        //下注\n        socket.on(\"on_room_game_betting\", function (ret) {\n            this.pushData(\"on_room_game_betting\", ret, function () {\n                console.log('on_room_game_betting:', ret);\n                cc.eventMgr.emit(\"on_room_game_betting\", ret)\n            })\n        }.bind(this))\n\n        //发牌\n        socket.on(\"on_room_game_send_cards\", function (ret) {\n            this.pushData(\"on_room_game_send_cards\", ret, function () {\n                console.log('on_room_game_send_cards:', ret);\n                cc.eventMgr.emit(\"on_room_game_send_cards\", ret)\n            })\n        }.bind(this))\n\n        //补牌\n        socket.on(\"on_room_game_mend_cards\", function (ret) {\n            this.pushData(\"on_room_game_mend_cards\", ret, function () {\n                console.log('on_room_game_mend_cards:', ret);\n                cc.eventMgr.emit(\"on_room_game_mend_cards\", ret)\n            })\n        }.bind(this))\n\n        //比牌\n        socket.on(\"on_room_game_compare_cards\", function (ret) {\n            this.pushData(\"on_room_game_compare_cards\", ret, function () {\n                console.log('on_room_game_compare_cards:', ret);\n                cc.eventMgr.emit(\"on_room_game_compare_cards\", ret)\n            })\n        }.bind(this))\n\n        //挤牌翻开\n        socket.on(\"on_room_game_squeeze_cards\", function (ret) {\n            this.pushData(\"on_room_game_squeeze_cards\", ret, function () {\n                console.log('on_room_game_squeeze_cards:', ret);\n                cc.eventMgr.emit(\"on_room_game_squeeze_cards\", ret)\n            })\n        }.bind(this))\n\n        //挤牌位置同步\n        socket.on(\"on_room_game_squeeze_cards_pos\", function (ret) {\n            this.pushData(\"on_room_game_squeeze_cards_pos\", ret, function () {\n                console.log('on_room_game_squeeze_cards_pos:', ret);\n                cc.eventMgr.emit(\"on_room_game_squeeze_cards_pos\", ret)\n            })\n        }.bind(this))\n\n        //广播 开始挤牌\n        socket.on(\"on_room_game_squeeze_cards_square\", function (ret) {\n            this.pushData(\"on_room_game_squeeze_cards_square\", ret, function () {\n                console.log('on_room_game_squeeze_cards_square:', ret);\n                cc.eventMgr.emit(\"on_room_game_squeeze_cards_square\", ret)\n            })\n        }.bind(this))\n\n        //转让挤牌权\n        socket.on(\"on_room_game_trans_permi\", function (ret) {\n            this.pushData(\"on_room_game_trans_permi\", ret, function () {\n                console.log('on_room_game_trans_permi:', ret);\n                cc.eventMgr.emit(\"on_room_game_trans_permi\", ret)\n            })\n        }.bind(this))\n\n        //单局结算\n        socket.on(\"on_settle_accounts_inning\", function (ret) {\n            this.pushData(\"on_settle_accounts_inning\", ret, function () {\n                console.log('on_settle_accounts_inning:', ret);\n                cc.eventMgr.emit(\"on_settle_accounts_inning\", ret)\n            })\n        }.bind(this))\n\n        //中途结算\n        socket.on(\"on_settle_accounts_midway\", function (ret) {\n            this.pushData(\"on_settle_accounts_midway\", ret, function () {\n                console.log('on_settle_accounts_midway:', ret);\n                cc.eventMgr.emit(\"on_settle_accounts_midway\", ret)\n            })\n        }.bind(this))\n\n        //游戏总结算\n        socket.on(\"on_settle_accounts_finish\", function (ret) {\n            this.pushData(\"on_settle_accounts_finish\", ret, function () {\n                console.log('on_settle_accounts_finish:', ret);\n                cc.eventMgr.emit(\"on_settle_accounts_finish\", ret)\n            })\n        }.bind(this))\n\n        //聊天\n        socket.on(\"on_room_chat\", function (ret) {\n            this.pushData(\"on_room_chat\", ret, function () {\n                console.log('on_room_chat:', ret);\n                cc.eventMgr.emit(\"on_room_chat\", ret)\n            })\n        }.bind(this))\n\n        //清除下注\n        socket.on(\"on_room_game_clear_bet\", function (ret) {\n            this.pushData(\"on_room_game_clear_bet\", ret, function () {\n                console.log('on_room_game_clear_bet:', ret);\n                cc.eventMgr.emit(\"on_room_game_clear_bet\", ret)\n            })\n        }.bind(this))\n\n        //切牌位置同步\n        socket.on(\"on_room_game_cut_cards_pos\", function (ret) {\n            this.pushData(\"on_room_game_cut_cards_pos\", ret, function () {\n                console.log('on_room_game_cut_cards_pos:', ret);\n                cc.eventMgr.emit(\"on_room_game_cut_cards_pos\", ret)\n            })\n        }.bind(this))\n\n        //切牌位置同步\n        socket.on(\"on_room_game_stop_operations\", function (ret) {\n            this.pushData(\"on_room_game_stop_operations\", ret, function () {\n                console.log('on_room_game_stop_operations:', ret);\n                // cc.eventMgr.emit(\"on_room_game_stop_operations\", ret)\n                if (!cc.gameMgr.view.isViewOnOpen(\"prefabs/totalResult/TotalResultView\")) {\n                    cc.common.showMsgBox({\n                        type: 2, msg: \"游戏停止运营，房间已解散\", okCb: function () {\n                            GameToAppHelper.ExitGame()\n                        }\n                    })\n                }\n                else {\n                    cc.gameMgr.isForbidGame = true\n                }\n            })\n        }.bind(this))\n    },\n\n    //把协议缓存起来,因为游戏场景可能还没初始化成功，会丢失数据\n    pushData: function (name, ret, cb) {\n        this.dataList.push({ name: name, ret: ret, cb: cb })\n    },\n\n    //一帧处理一个\n    handleData: function () {\n        var data = this.dataList[0]\n        if (data) {\n            data.cb(data.name, data.ret)\n            removeByIndex(this.dataList, 0)\n        }\n    },\n\n    exec: function (ret, func) {\n        if (ret.code == Code.OK) {\n            func()\n        }\n        else {\n            //重复提示不显示\n            if (cc.common.isRepetitionBar(ret.code)) {\n                return\n            }\n            //浏览器显示全部信息，方便调试\n            if (cc.sys.isBrowser) {\n                cc.common.showMsgBox({ type: 1, msg: Code.getCodeName(ret.code), codeNumber: ret.code })\n            }\n            //真机显示部分信息，策划的需求\n            else if (Code.isCanShow(ret.code)) {\n                cc.common.showMsgBox({ type: 1, msg: Code.getCodeName(ret.code), codeNumber: ret.code })\n            }\n        }\n    }\n\n});\n"]}