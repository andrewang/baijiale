{"version":3,"sources":["LoadingView.js"],"names":["BaseView","require","guanxiaoOffset","cc","Class","extends","properties","start","onLoad","progress_bar_node","find","node","guanxiao_node","onEnable","eventMgr","addEvent","updateProgress","onDisable","removeEvent","params","progress","Number","completeNum","loadNum","toFixed","x","width","getComponent","Sprite","fillRange"],"mappings":";;;;;;AAAA,IAAIA,WAAWC,QAAQ,UAAR,CAAf;AACA,IAAIC,iBAAiB,CAArB;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASL,QADJ;;AAGLM,gBAAY,EAHP;;AAOLC,WAAO,iBAAY,CAElB,CATI;;AAWLC,YAAQ,kBAAY;AAChB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,aAAKC,iBAAL,GAAyB,KAAKC,IAAL,CAAU,cAAV,EAA0BC,IAAnD;AACA,aAAKC,aAAL,GAAqB,KAAKF,IAAL,CAAU,UAAV,EAAsBC,IAA3C;AACH,KAlCI;;AAoCLE,cAAU,oBAAY;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAV,WAAGW,QAAH,CAAYC,QAAZ,CAAqB,SAArB,EAAgC,KAAKC,cAArC,EAAqD,IAArD;AACH,KAjDI;;AAmDLC,eAAW,qBAAY;AACnB;AACA;AACA;;AAEAd,WAAGW,QAAH,CAAYI,WAAZ,CAAwB,SAAxB,EAAmC,KAAKF,cAAxC;AACH,KAzDI;;AA2DLA,oBAAgB,wBAAUG,MAAV,EAAkB;AAC9B,YAAIC,WAAWC,OAAO,CAACF,OAAOG,WAAP,GAAqBH,OAAOI,OAA7B,EAAsCC,OAAtC,CAA8C,CAA9C,CAAP,CAAf;AACA,aAAKZ,aAAL,CAAmBa,CAAnB,GAAuBvB,iBAAiBkB,WAAW,KAAKX,iBAAL,CAAuBiB,KAA1E;AACA,aAAKjB,iBAAL,CAAuBkB,YAAvB,CAAoCxB,GAAGyB,MAAvC,EAA+CC,SAA/C,GAA2DT,QAA3D;AACH;;AA/DI,CAAT","file":"LoadingView.js","sourceRoot":"../../../../../../assets/scripts/common/loading","sourcesContent":["var BaseView = require(\"BaseView\")\nvar guanxiaoOffset = 5\ncc.Class({\n    extends: BaseView,\n\n    properties: {\n\n    },\n\n    start: function () {\n\n    },\n\n    onLoad: function () {\n        // cc.director.on(cc.Director.EVENT_BEFORE_SCENE_LOADING,function () {\n        //     cc.log(\"Director: 加载新场景之前所触发的事件\")\n        // })\n\n        // cc.director.on(cc.Director.EVENT_BEFORE_SCENE_LAUNCH, function () {\n        //     cc.log(\"Director: 运行新场景之前所触发的事件\")\n        // })\n\n        // cc.director.on(cc.Director.EVENT_AFTER_SCENE_LAUNCH, function () {\n        //     cc.log(\"Director: 运行新场景之后所触发的事件\")\n        // })\n\n        // cc.director.on(cc.Director.EVENT_BEFORE_VISIT, function () {\n        //     cc.log(\"Director: 渲染后\")\n        // })\n\n        // cc.director.on(cc.Director.EVENT_AFTER_DRAW, function () {\n        //     cc.log(\"Director: 渲染后\")\n        // })\n\n        this.progress_bar_node = this.find(\"progress_bar\").node\n        this.guanxiao_node = this.find(\"guanxiao\").node\n    },\n\n    onEnable: function () {\n        // cc.log(\"LoadingView onEnable\")\n        // var self = this\n        // cc.loader.onProgress = function (completedCount, totalCount, item) {\n        //     var progress = Number((completedCount / totalCount).toFixed(2))\n        //     if (item && item.uuid && self.progress_bar_node && self.guanxiao_node && progress > self.progress_bar_node.getComponent(cc.Sprite).fillRange) {\n        //         //cc.log(\"completedCount = \" + completedCount + \", totalCount = \" + totalCount + \", progress = \" + progress);\n        //         self.guanxiao_node.x = guanxiaoOffset + progress * self.progress_bar_node.width\n        //         self.progress_bar_node.getComponent(cc.Sprite).fillRange = progress\n        //     }\n        // };\n\n        cc.eventMgr.addEvent(\"loadRes\", this.updateProgress, this)\n    },\n\n    onDisable: function () {\n        // cc.log(\"LoadingView onDisable\")\n        // this.guanxiao_node.x = guanxiaoOffset\n        // this.progress_bar_node.getComponent(cc.Sprite).fillRange = 0\n\n        cc.eventMgr.removeEvent(\"loadRes\", this.updateProgress)\n    },\n\n    updateProgress: function (params) {\n        var progress = Number((params.completeNum / params.loadNum).toFixed(2))\n        this.guanxiao_node.x = guanxiaoOffset + progress * this.progress_bar_node.width\n        this.progress_bar_node.getComponent(cc.Sprite).fillRange = progress\n    },\n\n\n    });\n"]}