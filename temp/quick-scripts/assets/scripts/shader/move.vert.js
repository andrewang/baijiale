(function() {"use strict";var __module = CC_EDITOR ? module : {exports:{}};var __filename = 'preview-scripts/assets/scripts/shader/move.vert.js';var __require = CC_EDITOR ? function (request) {return cc.require(request, require);} : function (request) {return cc.require(request, __filename);};function __define (exports, require, module) {"use strict";
cc._RF.push(module, '18c23aNjipIj5t/Ee2HtMN2', 'move.vert', __filename);
// scripts/shader/move.vert.js

"use strict";

module.exports = "\n// attribute vec2 a_position;\nattribute vec4 a_position;\nattribute vec2 a_texCoord;\nuniform float ratio; //\u6324\u724C\u7A0B\u5EA6\nuniform float radius;\nuniform float width;\nuniform float height;\nuniform float rotation;\n\nuniform float offx;\nuniform float offy;\nuniform float rotationLc;\nvarying vec2 v_texCoord;\n\nvoid main()\n{\n    vec4 tmp_pos = vec4(0.0, 0.0, 0.0, 0.0);\n    if (0.0 <= rotation && rotation < 90.0) {\n        tmp_pos = vec4(a_position.x, a_position.y, 0.0, 1.0);\n    }\n    else if (90.0 == rotation) {\n        // tmp_pos = vec4(a_position.y, width-a_position.x, 0.0, 1.0);\n        tmp_pos = vec4(a_position.x, a_position.y, 0.0, 1.0);\n    }\n    \n    float halfPeri = radius * 3.14159; //\u534A\u5706\u7684\u5F27\u957F\uFF08radius\u4E3A\u534A\u5F84this.pokerHeight / 10\uFF09\n    float hr = height * ratio;  //\u6324\u4E86\u591A\u5C11\u957F\u5EA6\n    // float hr = width * ratio;  //\u6324\u4E86\u591A\u5C11\u957F\u5EA6\n    // float hr = 0.0;\n    // if (0.0 <= rotation && rotation < 90.0) {\n    //     hr = height * ratio;\n    // }\n    // else if (90.0 == rotation) {\n    //     hr = height * ratio;\n    // }\n    //\u4E00\u5F00\u59CB\u7684\u6324\n    if(hr > 0.0 && hr <= halfPeri){\n        if (0.0 <= rotation && rotation < 90.0) {\n            if(tmp_pos.y < hr){\n                float rad = hr/ 3.14159; //\u5C0F\u534A\u5F84\uFF08\u4EE5\u8FD9\u4E2A\u957F\u5EA6\u4E3A\u534A\u5706\u7684\u5706\u7684\u534A\u5F84\uFF09\n                float arc = (hr-tmp_pos.y)/rad; //\u5F27\u5EA6,\u8FD9\u6BB5\u5F27\u957F\u5BF9\u5E94\u7684\u89D2\u5EA6\n                tmp_pos.y = hr - sin(arc)*rad; //\u659C\u8FB9\u4E3A\u534A\u5F84\u7684\u4E09\u89D2\u5F62\uFF0C\u8BA1\u7B97\u8FD9\u4E2A\u70B9\u6240\u5728\u7684Y\u8F74\u4F4D\u7F6E\n                tmp_pos.z = rad * (1.0-cos(arc));\n            }\n        }\n        else if (90.0 == rotation) {\n            if(tmp_pos.x < hr){\n                float rad = hr/ 3.14159; //\u5C0F\u534A\u5F84\uFF08\u4EE5\u8FD9\u4E2A\u957F\u5EA6\u4E3A\u534A\u5706\u7684\u5706\u7684\u534A\u5F84\uFF09\n                float arc = (hr-tmp_pos.x)/rad; //\u5F27\u5EA6,\u8FD9\u6BB5\u5F27\u957F\u5BF9\u5E94\u7684\u89D2\u5EA6\n                tmp_pos.x = hr - sin(arc)*rad; //\u659C\u8FB9\u4E3A\u534A\u5F84\u7684\u4E09\u89D2\u5F62\uFF0C\u8BA1\u7B97\u8FD9\u4E2A\u70B9\u6240\u5728\u7684Y\u8F74\u4F4D\u7F6E\n                tmp_pos.z = rad * (1.0-cos(arc));\n           }\n        }\n    }\n    //\u6324\u724C\u8FC7\u7A0B\n    if(hr > halfPeri){\n        if (0.0 <= rotation && rotation < 90.0) {\n            float straight = (hr - halfPeri)/2.0; //\u76F4\u7684\u90E8\u5206\u7684\u957F\u5EA6\n            if(tmp_pos.y < straight){\n                tmp_pos.y = hr  - tmp_pos.y;\n                tmp_pos.z = radius * 2.0;\n            }\n            //\u5DF2\u7FFB\u5F00\u7684\u4E0B\u9762\u5F2F\u66F2\u7684\u90E8\u5206\n            else if(tmp_pos.y < (straight + halfPeri)) {\n                float dy = halfPeri - (tmp_pos.y - straight);\n                float arc = dy/radius;\n                tmp_pos.y = hr - straight - sin(arc)*radius;\n                tmp_pos.z = radius * (1.0-cos(arc));\n            }\n        }\n        else if (90.0 == rotation) {\n            float straight = (hr - halfPeri)/2.0; //\u76F4\u7684\u90E8\u5206\u7684\u957F\u5EA6\n            if(tmp_pos.x < straight){\n                tmp_pos.x = hr - tmp_pos.x;\n                tmp_pos.z = radius * 2.0;\n            }\n            //\u5DF2\u7FFB\u5F00\u7684\u4E0B\u9762\u5F2F\u66F2\u7684\u90E8\u5206\n            else if(tmp_pos.x < (straight + halfPeri)) {\n                float dx = halfPeri - (tmp_pos.x - straight);\n                float arc = dx/radius;\n                tmp_pos.x = hr - straight - sin(arc)*radius;\n                tmp_pos.z = radius * (1.0-cos(arc));\n            }\n        }\n     }\n     //\u4F4D\u7F6E\u504F\u79FB\u7684\n    float y1 = tmp_pos.y;\n    float z1 = tmp_pos.z;\n    float y2 = height;\n    float z2 = 0.0;\n    float sinRat = sin(rotationLc);\n    float cosRat = cos(rotationLc);\n    tmp_pos.y=(y1-y2)*cosRat-(z1-z2)*sinRat+y2;\n    tmp_pos.z=(z1-z2)*cosRat+(y1-y2)*sinRat+z2;\n    tmp_pos.y = tmp_pos.y - height/2.0*(1.0-cosRat);\n    tmp_pos += vec4(offx, offy, 0.0, 0.0);\n\n    gl_Position = CC_MVPMatrix * tmp_pos;\n    v_texCoord = vec2(1.0-a_texCoord.x, 1.0-a_texCoord.y);\n\n }\n\n";

cc._RF.pop();
        }
        if (CC_EDITOR) {
            __define(__module.exports, __require, __module);
        }
        else {
            cc.registerModuleFunc(__filename, function () {
                __define(__module.exports, __require, __module);
            });
        }
        })();
        //# sourceMappingURL=move.vert.js.map
        