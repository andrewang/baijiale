{"version":3,"sources":["NoticeView.js"],"names":["BaseView","require","cc","Class","extends","properties","onLoad","_super","toggleActivity","find","toggleAnnounce","imgContent","eventMgr","addEvent","showItemContent","setData","data","announceList","activityList","i","length","element","type","push","showType","scContent","removeAllChildren","list","prefab","res","item","instantiate","parent","js","_components","node","active","show","changeToggle","hide","getComponent","Toggle","isChecked","resMgr","loadNetUrl","content","onDestroy","removeEvent"],"mappings":"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","file":"NoticeView.js","sourceRoot":"../../../../../../../../assets/scripts/app/lobby/view/notice","sourcesContent":["var BaseView = require(\"BaseView\")\n\ncc.Class({\n    extends: BaseView,\n\n    properties: {\n        \n    },\n\n    onLoad: function () {\n        this._super()\n        this.toggleActivity = this.find(\"toggleActivity\")\n        this.toggleAnnounce = this.find(\"toggleAnnounce\")\n        this.imgContent = this.find(\"imgContent\")\n        cc.eventMgr.addEvent(\"selectNoticeItem\", this.showItemContent, this)\n    },\n\n    //data:items {Notice结构体,...}\n    setData: function (data) {\n        this.data = data\n        this.announceList = []\n        this.activityList = []\n        for (var i = 0; i < this.data.length; i++) {\n            var element = this.data[i]\n            if (0 == element.type) {\n                this.announceList.push(element)\n            }\n            else {\n                this.activityList.push(element)\n            }\n        }\n    },\n\n    //显示公告或者活动（公告0 活动1）\n    showType: function (type) {\n        if (!this.scContent) {\n            this.scContent = this.find(\"scContent\")\n        }\n        if (!this.data) {\n            return\n        }\n        this.scContent.removeAllChildren()\n        var list\n        if (0 == type) {\n            list = this.announceList\n        }\n        else {\n            list = this.activityList\n        }\n        for (var i = 0; i < list.length; i++) {\n            var element = list[i]\n            if (type == element.type) {\n                var prefab = cc.res[\"prefabs/notice/noticeItem\"]\n                var item = cc.instantiate(prefab)\n                item.parent = this.scContent\n                item.js = item._components[0]\n                item.js.setData(element)\n            }\n        }\n        //如果有item，显示第一个item的内容\n        if (list.length > 0) {\n            this.imgContent.node.active = true\n            this.showItemContent(list[0])\n        }\n        else {\n            this.imgContent.node.active = false\n        }\n    },\n\n    show: function () {\n        this._super()\n        this.changeToggle()\n    },\n\n    hide: function () {\n        this._super()\n    },\n\n    changeToggle: function () {\n        if (this.toggleActivity.getComponent(cc.Toggle).isChecked) {\n            this.showType(1)\n        }\n        else {\n            this.showType(0)\n        }\n    },\n\n    showItemContent: function (data) {\n        cc.resMgr.loadNetUrl(this.find(\"imgContent\"), data.content)\n    },\n\n    onDestroy: function () {\n        this._super()\n        cc.eventMgr.removeEvent(\"selectNoticeItem\", this.showItemContent)\n    },\n\n});\n"]}