{"version":3,"sources":["WayBillPreview.js"],"names":["BaseObj","require","cc","Class","extends","properties","onLoad","eventMgr","addEvent","setData","qipailuData","parent","find","removeAllChildren","getNextPos","index","row","col","Math","ceil","zhuang","xian","he","i","length","data","node","Node","sprite","addComponent","Sprite","state_list","indexOf","spriteFrame","res","pos","width","height","position","x","y","string","onDestroy","removeEvent"],"mappings":";;;;;;AAAA,IAAIA,UAAUC,QAAQ,SAAR,CAAd;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASJ,OADJ;;AAGLK,gBAAY,EAHP;;AAOLC,YAAQ,kBAAY;AAChBJ,WAAGK,QAAH,CAAYC,QAAZ,CAAqB,yBAArB,EAAgD,KAAKC,OAArD,EAA8D;AAC9D;AADA;AAEH,KAVI;;AAYLA,aAAS,iBAAUC,WAAV,EAAuB;AAC5B,YAAIC,SAAS,KAAKC,IAAL,CAAU;AACvB;AADa,SAAb,CAEAD,OAAOE,iBAAP;AACA,iBAASC,UAAT,CAAoBC,KAApB,EAA2B;AACvB,gBAAIC,MAAMD,QAAQ,CAAlB;AACA,gBAAI,KAAKC,GAAT,EAAc;AACVA,sBAAM,CAAN;AACH;AACD,gBAAIC,MAAMC,KAAKC,IAAL,CAAUJ,QAAQ,CAAlB,CAAV;AACA,mBAAO,EAAEC,KAAKA,GAAP,EAAYC,KAAKA,GAAjB,EAAP;AACH;;AAED;AACA,YAAIG,MAAJ,EAAYC,IAAZ,EAAkBC,EAAlB;AACAF,iBAASC,OAAOC,KAAK,CAArB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIb,YAAYc,MAAhC,EAAwCD,GAAxC,EAA6C;AACzC,gBAAIE,OAAOf,YAAYa,CAAZ,CAAX;AACA,gBAAIG,OAAO,IAAIxB,GAAGyB,IAAP,CAAY,YAAZ,CAAX;AACA,gBAAIC,SAASF,KAAKG,YAAL,CAAkB3B,GAAG4B,MAArB,CAAb;AACAJ,iBAAKf,MAAL,GAAcA,MAAd;AACA,gBAAI,CAAC,CAAD,IAAMc,KAAKM,UAAL,CAAgBC,OAAhB,CAAwB,CAAxB,CAAV,EAAsC;AAClCZ;AACAQ,uBAAOK,WAAP,GAAqB/B,GAAGgC,GAAH,CAAO,yBAAP,CAArB;AACH;AACD,gBAAI,CAAC,CAAD,IAAMT,KAAKM,UAAL,CAAgBC,OAAhB,CAAwB,CAAxB,CAAV,EAAsC;AAClCX;AACAO,uBAAOK,WAAP,GAAqB/B,GAAGgC,GAAH,CAAO,yBAAP,CAArB;AACH;AACD,gBAAI,CAAC,CAAD,IAAMT,KAAKM,UAAL,CAAgBC,OAAhB,CAAwB,CAAxB,CAAV,EAAsC;AAClCV;AACAM,uBAAOK,WAAP,GAAqB/B,GAAGgC,GAAH,CAAO,yBAAP,CAArB;AACH;;AAED,gBAAIC,MAAMrB,WAAWS,IAAI,CAAf,CAAV;AACA,gBAAIa,QAAQ,IAAZ;AACA,gBAAIC,SAAS,EAAb;AACAX,iBAAKY,QAAL,GAAgB,EAAEC,GAAG,CAACJ,IAAIlB,GAAJ,GAAU,CAAX,IAAgBmB,KAAhB,GAAwBA,QAAQ,CAArC,EAAwCI,GAAG,CAAC,IAAIL,IAAInB,GAAT,IAAgBqB,MAAhB,GAAyBA,SAAS,CAAlC,GAAsC,CAAjF,EAAhB;AACH;AACD,aAAKzB,IAAL,CAAU,eAAV,EAA2B6B,MAA3B,GAAoCrB,MAApC;AACA,aAAKR,IAAL,CAAU,eAAV,EAA2B6B,MAA3B,GAAoCpB,IAApC;AACA,aAAKT,IAAL,CAAU,eAAV,EAA2B6B,MAA3B,GAAoCnB,EAApC;AACH,KAjEI;;AAmELoB,eAAW,qBAAY;AACnBxC,WAAGK,QAAH,CAAYoC,WAAZ,CAAwB,yBAAxB,EAAmD,KAAKlC,OAAxD;AACH;AArEI,CAAT","file":"WayBillPreview.js","sourceRoot":"../../../../../../../../assets/scripts/app/game/view/WayBill","sourcesContent":["var BaseObj = require(\"BaseObj\")\ncc.Class({\n    extends: BaseObj,\n\n    properties: {\n        \n    },\n\n    onLoad: function () {\n        cc.eventMgr.addEvent(\"onWayBillPreviewSetData\", this.setData, this)\n        // this.setData()\n    },\n\n    setData: function (qipailuData) {\n        var parent = this.find(\"nodeContent\")\n        // var parent = this.find(\"btnWayBillPreview\")\n        parent.removeAllChildren()\n        function getNextPos(index) {\n            var row = index % 6\n            if (0 == row) {\n                row = 6\n            }\n            var col = Math.ceil(index / 6)\n            return { row: row, col: col }\n        }\n\n        // var qipailuData = cc.wayBillMgr.view.qipailuData\n        var zhuang, xian, he\n        zhuang = xian = he = 0\n        //test\n        // for (var i = 0; i < 100; i++) {\n        //     var node = new cc.Node(\"New Sprite\")\n        //     var sprite = node.addComponent(cc.Sprite)\n        //     node.parent = parent\n        //     sprite.spriteFrame = cc.res[\"bigway/wayBillPreview3\"]\n        //     var pos = getNextPos(i + 1)\n        //     var width = 25\n        //     var height = 22\n        //     node.position = { x: (pos.col - 1) * width + 50, y: (6 - pos.row) * height + 30 }\n        // }\n        for (var i = 0; i < qipailuData.length; i++) {\n            var data = qipailuData[i]\n            var node = new cc.Node(\"New Sprite\")\n            var sprite = node.addComponent(cc.Sprite)\n            node.parent = parent\n            if (-1 != data.state_list.indexOf(1)) {\n                zhuang++\n                sprite.spriteFrame = cc.res[\"waybill/wayBillPreview1\"]\n            }\n            if (-1 != data.state_list.indexOf(2)) {\n                xian++\n                sprite.spriteFrame = cc.res[\"waybill/wayBillPreview2\"]\n            }\n            if (-1 != data.state_list.indexOf(3)) {\n                he++\n                sprite.spriteFrame = cc.res[\"waybill/wayBillPreview3\"]\n            }\n\n            var pos = getNextPos(i + 1)\n            var width = 20.5\n            var height = 21\n            node.position = { x: (pos.col - 1) * width + width / 2, y: (6 - pos.row) * height + height / 2 - 2}\n        }\n        this.find(\"previewPoint1\").string = zhuang\n        this.find(\"previewPoint2\").string = xian\n        this.find(\"previewPoint3\").string = he\n    },\n\n    onDestroy: function () {\n        cc.eventMgr.removeEvent(\"onWayBillPreviewSetData\", this.setData)\n    },\n});\n"]}