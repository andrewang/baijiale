{"version":3,"sources":["GameScene.js"],"names":["BaseScene","require","GameToAppHelper","betState","clientBetState","clientCardIndex","stateEnmu","record","recordMgr","create","cc","Class","extends","properties","moduleName","override","default","visible","cardList","isCanSendCutCards","onLoad","_super","musicMgr","stopLobbyBgm","initView","initListener","initAniEvent","i","find","js","getComponent","init","chipList","nodeRecordVoice","node_quanxian_xian","node","node_quanxian_zhuang","pos_quanxian_xian","position","pos_quanxian_zhuang","xianScore","zhuangScore","btnFlipXian","btnFlipZhuang","light_xian","light_zhuang","light_he","txtZhuangTotalBetNum","txtXianTotalBetNum","txtHeTotalBetNum","txtZhuangduiTotalBetNum","txtXianduiTotalBetNum","nodeChip1","nodeChip2","he","zhuangdui","xiandui","active","setLocalZOrder","zhuangThanCardEffect","xianThanCardEffect","zhuangCardParticle","xianCardParticle","yingPaiEffect","reset","handleExamine","Animation","on","card","instantiate","res","parent","showBack","onLoadCb","txtNum","self","cutCtrlNode","Node","EventType","TOUCH_MOVE","touch","mgr","isRoomOwner","pos","convertTouchToNodeSpaceAR","x","y","scaleX","netMgr","request","ret","exec","scheduleTimeOut","bind","TOUCH_START","requestCutCards","Math","min","max","reqCutCards","TOUCH_END","TOUCH_CANCEL","betListener","log","currentTarget","_name","BETTING","gUserData","roomInfo","game_status","BETTING_DELAY","selectChip","getSelectChip","state","reqBet","jetton","Number","value","string","btn_voice","node1","node2","getChildByName","play","startRecord","stop","tryToStopRecord","abs","getContentSize","height","eventHideListener","eventManager","addCustomListener","game","EVENT_HIDE","event","isNeedReconnect","audioEngine","stopAll","onAppBack","eventShowListener","EVENT_SHOW","onAppFront","isViewOnOpen","setCutControlPos","start","setRoomInfo","dealCards","serverCardList","push","clone","player_cards_list","banker_cards_list","secCfg","setData","setRotation","handle","playEffect","dealMove","setLeftCardNum","leftCardNum","buCards","player_mend_cards","banker_mend_cards","move","getCardTotalPoint","who","list","point","length","isFront","getCardNum","newGetCardTotalPoint","showScore","isFlip","xPoint","zPoint","getNotOpenCard","notOpenCardList","unopen_cards_list","index","handleSqueeze","isMyJipai","gameMgr","curJipaiPlayerUid","_myData","user_base_info","uid","getJiNode","getPos","player","getPlayerByUid","seatId","getClientSeatId","moveToSqueeze","nodeJi","posJi1","posJi2","isExitOneCardOnMove","isNeedJi","isOnFlip","room_num","setJushu","inning_count","playerDataList","seat_info_list","setRoomOwner","seat","owner_base_info","setPlayerDatas","user_win_total_list","user_profit","setGoldNum","win_jetton","owner_win_total","room_status","room_setup_info","hig_bet","low_bet","surplus_cards","betInfoList","user_betting_info_list","info","setBetInfo","view","openView","chess_cards_way_list","hide","handleRoomInfo","dissolve","common","showMsgBox","type","msg","okCb","reqRoomClose","cancleCb","reqRoomLeave","btnGameStart","reqStartGame","showDiscard","flipCard","resMgr","updateSprite","getCardResResultName","num","cards","nodeChipTarget","chip","Toggle","isChecked","data","getUid","compareCards","checkZXdui","state_info","state_list","indexOf","is_last_compare_cards","midCompareFinish","flip","zhuangTianEffectPlay","xianTianEffectPlay","showTianPaiEffect","director","getScheduler","schedule","compare","showZhuangYingPaiEffect","showXianYingPaiEffect","playChipAreaFlash","resetSystem","testBet","addChip","nodeName","getTotalChipValueArea","setChipsOnArea","chipSettle","showWayBill","getPlayerBetParent","area","obj","getClassName","setBankerDelegate","stopAllActions","zhuangPlayer","dis","pDistance","time","ceil","runAction","moveTo","setXianDelegate","xianPlayer","showSettingView","showChatView","buCardsTest","updateTotalBetInfo","txtList","totalBetNumList","onBtnWindow","backToApp","onBtnClearBet","reqClearBet","onBtnConfirmBet","reqStopBet","hideTimer","onDestroy","removeListener","unscheduleAllForTarget","getNeedSqueezeCard","onBtnFlipCard","requestSqueeze","opacity","getCanMovePowerObjPlayers","onInviteFriends","weChatRoomInvite","onInviteDDFriends","dingdingRoomInvite","IS_EXAMINE"],"mappings":"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","file":"GameScene.js","sourceRoot":"../../../../../../assets/scripts/app/game","sourcesContent":["var BaseScene = require(\"BaseScene\")\r\nvar GameToAppHelper = require(\"GameToAppHelper\")\r\n//客户端下注的名字对应服务端的数据类型\r\nvar betState = {}\r\nbetState[\"x1\"] = 2\r\nbetState[\"z1\"] = 1\r\nbetState[\"h\"] = 3\r\nbetState[\"xd\"] = 5\r\nbetState[\"zd\"] = 4\r\n\r\nvar clientBetState = require(\"GameConfig\").clientBetState\r\nvar clientCardIndex = require(\"GameConfig\").clientCardIndex\r\nvar stateEnmu = require(\"GameConfig\").stateEnmu\r\nvar record = require(\"RecordMgr\")\r\n// var recordMgr = new record\r\nvar recordMgr = record.create()\r\n\r\ncc.Class({\r\n    extends: BaseScene,\r\n    properties: {\r\n        moduleName: {\r\n            override: true,\r\n            default: \"Game\",\r\n            visible: false,\r\n        },\r\n        cardList: {\r\n            default: []\r\n        },\r\n        isCanSendCutCards: true,\r\n    },\r\n\r\n    onLoad: function () {\r\n        this._super()\r\n\r\n        cc.musicMgr.stopLobbyBgm()\r\n        this.initView()\r\n        this.initListener()\r\n        this.initAniEvent()\r\n    },\r\n\r\n    initView: function () {\r\n        for (var i = 0; i <= 9; i++) {\r\n            this.find(\"player\" + i).js = this.find(\"player\" + i).getComponent(\"Player\")\r\n            this.find(\"player\" + i).js.init(i)\r\n            this[\"player\" + i] = this.find(\"player\" + i)\r\n        }\r\n\r\n        //筹码初始化\r\n        var chipList = []\r\n        chipList[1] = 1\r\n        chipList[2] = 5\r\n        chipList[3] = 10\r\n        chipList[4] = 50\r\n        chipList[5] = 100\r\n        this.nodeRecordVoice = this.find(\"nodeRecordVoice\")\r\n        this.node_quanxian_xian = this.find(\"node_quanxian_xian\").node\r\n        this.node_quanxian_zhuang = this.find(\"node_quanxian_zhuang\").node\r\n        this.pos_quanxian_xian = this.node_quanxian_xian.position\r\n        this.pos_quanxian_zhuang = this.node_quanxian_zhuang.position\r\n        this.xianScore = this.find(\"xianScore\")\r\n        this.zhuangScore = this.find(\"zhuangScore\")\r\n        this.btnFlipXian = this.find(\"btnFlipXian\")\r\n        this.btnFlipZhuang = this.find(\"btnFlipZhuang\")\r\n        this.light_xian = this.find(\"light_xian\")\r\n        this.light_zhuang = this.find(\"light_zhuang\")\r\n        this.light_he = this.find(\"light_he\")\r\n        this.txtZhuangTotalBetNum = this.find(\"txtZhuangTotalBetNum\")\r\n        this.txtXianTotalBetNum = this.find(\"txtXianTotalBetNum\")\r\n        this.txtHeTotalBetNum = this.find(\"txtHeTotalBetNum\")\r\n        this.txtZhuangduiTotalBetNum = this.find(\"txtZhuangduiTotalBetNum\")\r\n        this.txtXianduiTotalBetNum = this.find(\"txtXianduiTotalBetNum\")\r\n        this.nodeChip1 = this.find(\"nodeChip1\")\r\n        this.nodeChip2 = this.find(\"nodeChip2\")\r\n        this.he = this.find(\"he\")\r\n        this.zhuangdui = this.find(\"zhuangdui\")\r\n        this.xiandui = this.find(\"xiandui\")\r\n        for (var i = 1; i <= 9; i++) {\r\n            this[\"zhuang\" + i] = this.find(\"zhuang\" + i)\r\n            this[\"xian\" + i] = this.find(\"xian\" + i)\r\n        }\r\n\r\n        this.nodeRecordVoice.active = false\r\n        this.nodeChip1.active = false\r\n        this.nodeChip2.active = false\r\n        this.find(\"nodeCardPos\").active = true\r\n\r\n        for (var i = 0; i <= 9; i++) {\r\n            var node = this.find(\"nodeJi\" + i)\r\n            if (node) {\r\n                node.active = false\r\n            }\r\n        }\r\n        this.find(\"fapaiqi\").setLocalZOrder(50)\r\n        this.zhuangThanCardEffect = this.find(\"zhuangThanCardEffect\")\r\n        this.xianThanCardEffect = this.find(\"xianThanCardEffect\")\r\n        this.zhuangCardParticle = this.find(\"zhuangCardParticle\")\r\n        this.xianCardParticle = this.find(\"xianCardParticle\")\r\n\r\n        this.yingPaiEffect = this.find(\"yingPaiEffect\")\r\n\r\n        // this._zhuangFirstPos = this.find(\"zhuangYingPaiEffect\").position\r\n        // this._zhuangCompareCardPos = this.find(\"zhuangCompareCard\").position\r\n\r\n        // this._xianFirstPos = this.find(\"xianYingPaiEffect\").position\r\n        // this._xianCompareCardPos = this.find(\"xianCompareCard\").position\r\n\r\n        this.reset()\r\n        this.handleExamine()\r\n    },\r\n\r\n    initAniEvent: function () {\r\n        this.find(\"aniXiandui\").getComponent(cc.Animation).on('stop', function () {\r\n            this.find(\"aniXiandui\").active = false\r\n        }, this)\r\n        this.find(\"aniZhuangdui\").getComponent(cc.Animation).on('stop', function () {\r\n            this.find(\"aniZhuangdui\").active = false\r\n        }, this)\r\n    },\r\n\r\n    reset: function () {\r\n        for (var i = 0; i <= 9; i++) {\r\n            // this.find(\"player\" + i).reset()\r\n            this[\"player\" + i].reset()\r\n        }\r\n        for (var i = 1; i <= 6; i++) {\r\n            this.find(\"posCard\" + i).node.active = false\r\n        }\r\n        this.find(\"pokerDiscard\").active = false\r\n        this.find(\"cutPoker\").active = false\r\n\r\n        //6张牌\r\n        for (var i = 1; i <= 6; i++) {\r\n            var card = this.cardList[i]\r\n            if (!card) {\r\n                card = cc.instantiate(cc.res[\"prefabs/card/Card\"])\r\n                this.cardList[i] = card\r\n                card.parent = this.find(\"nodeCardPos\")\r\n            }\r\n            card.position = this.find(\"posCard0\").node.position\r\n            if (card.js) {\r\n                card.js.reset()\r\n                card.js.showBack()\r\n                card.active = false\r\n            }\r\n            else {\r\n                card.onLoadCb = function (js) {\r\n                    js.reset()\r\n                    js.showBack()\r\n                    js.node.active = false\r\n                }\r\n            }\r\n        }\r\n\r\n        this.node_quanxian_xian.getComponent(\"PowerObj\").reset()\r\n        this.node_quanxian_zhuang.getComponent(\"PowerObj\").reset()\r\n\r\n        this.find(\"xian1\").txtNum.node.active = false\r\n        this.find(\"zhuang1\").txtNum.node.active = false\r\n        this.find(\"xiandui\").txtNum.node.active = false\r\n        this.find(\"zhuangdui\").txtNum.node.active = false\r\n        this.find(\"he\").txtNum.node.active = false\r\n        this.find(\"aniXiandui\").active = false\r\n        this.find(\"aniZhuangdui\").active = false\r\n        this.xianScore.node.active = false\r\n        this.zhuangScore.node.active = false\r\n\r\n        // this.find(\"xianYingPaiEffect\").position = this._xianFirstPos\r\n        // this.find(\"zhuangYingPaiEffect\").position = this._zhuangFirstPos\r\n        this.yingPaiEffect.active = false\r\n    },\r\n\r\n    initListener: function () {\r\n        //初始化切牌监听\r\n        var self = this\r\n        var cutCtrlNode = this.find(\"cutControl\")\r\n        cutCtrlNode.on(cc.Node.EventType.TOUCH_MOVE, function (touch) {\r\n            if (!this.mgr.isRoomOwner()) {\r\n                return\r\n            }\r\n            this.find(\"arrows\").active = false\r\n            var pos = cutCtrlNode.parent.convertTouchToNodeSpaceAR(touch)\r\n            if (pos.x <= 240 && pos.x >= -240) {\r\n                cutCtrlNode.position = { x: pos.x, y: cutCtrlNode.position.y }\r\n                cutCtrlNode.scaleX = pos.x / 240\r\n                //发送同步位置\r\n                if (this.isCanSendCutCards) {\r\n                    this.isCanSendCutCards = false\r\n                    cc.netMgr.request(\"room_game_cut_cards_pos\", { pos: cutCtrlNode.position }, function (ret) {\r\n                        cc.netMgr.exec(ret, function () {\r\n                        })\r\n                    })\r\n\r\n                    scheduleTimeOut(function () {\r\n                        this.isCanSendCutCards = true\r\n                    }.bind(this), this, 0.01)\r\n                }\r\n            }\r\n        }, this)\r\n        cutCtrlNode.on(cc.Node.EventType.TOUCH_START, function () {\r\n\r\n        }, this)\r\n\r\n        var requestCutCards = function (touch) {\r\n            if (!this.mgr.isRoomOwner()) {\r\n                return\r\n            }\r\n            var pos = cutCtrlNode.parent.convertTouchToNodeSpaceAR(touch)\r\n            var x = pos.x\r\n            x = Math.min(x, 240)\r\n            x = Math.max(x, -240)\r\n            self.mgr.reqCutCards({ pos: x })\r\n        }.bind(this)\r\n\r\n        cutCtrlNode.on(cc.Node.EventType.TOUCH_END, function (touch) {\r\n            requestCutCards(touch)\r\n        }, this)\r\n        cutCtrlNode.on(cc.Node.EventType.TOUCH_CANCEL, function (touch) {\r\n            requestCutCards(touch)\r\n        }, this)\r\n\r\n        function betListener(touch) {\r\n            cc.log(touch.currentTarget._name)\r\n            if (this.mgr.isRoomOwner() || (stateEnmu.BETTING != gUserData.roomInfo.game_status && stateEnmu.BETTING_DELAY != gUserData.roomInfo.game_status)) {\r\n                return\r\n            }\r\n\r\n            var selectChip = this.getSelectChip()\r\n            var state = betState[touch.currentTarget._name]\r\n            this.mgr.reqBet({ state: state, jetton: Number(selectChip.value.string) })\r\n\r\n            //test 下注测试\r\n            // this.testBet()\r\n        }\r\n        this.find(\"x1\").node.on(cc.Node.EventType.TOUCH_END, betListener, this)\r\n        this.find(\"z1\").node.on(cc.Node.EventType.TOUCH_END, betListener, this)\r\n        this.find(\"xd\").node.on(cc.Node.EventType.TOUCH_END, betListener, this)\r\n        this.find(\"zd\").node.on(cc.Node.EventType.TOUCH_END, betListener, this)\r\n        this.find(\"h\").node.on(cc.Node.EventType.TOUCH_END, betListener, this)\r\n\r\n        //录音\r\n        var btn_voice = this.find(\"btn_voice\")\r\n        btn_voice.on(cc.Node.EventType.TOUCH_START, function () {\r\n            cc.log(\"TOUCH_START\")\r\n            this.nodeRecordVoice.active = true\r\n            this.nodeRecordVoice.node1.active = true\r\n            this.nodeRecordVoice.node2.active = false\r\n            this.nodeRecordVoice.node1.getChildByName(\"ani\").getComponent(cc.Animation).play()\r\n            recordMgr.startRecord()\r\n        }, this)\r\n        btn_voice.on(cc.Node.EventType.TOUCH_END, function () {\r\n            cc.log(\"TOUCH_END\")\r\n            this.nodeRecordVoice.active = false\r\n            this.nodeRecordVoice.node1.getChildByName(\"ani\").getComponent(cc.Animation).stop()\r\n            recordMgr.tryToStopRecord(1)\r\n        }, this)\r\n        btn_voice.on(cc.Node.EventType.TOUCH_CANCEL, function () {\r\n            cc.log(\"TOUCH_CANCEL\")\r\n            this.nodeRecordVoice.active = false\r\n            this.nodeRecordVoice.node1.getChildByName(\"ani\").getComponent(cc.Animation).stop()\r\n            recordMgr.tryToStopRecord(0)\r\n        }, this)\r\n        btn_voice.on(cc.Node.EventType.TOUCH_MOVE, function (touch) {\r\n            this.nodeRecordVoice.active = true\r\n            var pos = btn_voice.parent.convertTouchToNodeSpaceAR(touch)\r\n            if (Math.abs(pos.y - btn_voice.position.y) >= btn_voice.getContentSize().height / 2) {\r\n                this.nodeRecordVoice.node1.active = false\r\n                this.nodeRecordVoice.node2.active = true\r\n            } else {\r\n                this.nodeRecordVoice.node1.active = true\r\n                this.nodeRecordVoice.node2.active = false\r\n            }\r\n        }, this)\r\n\r\n        //进入后台 \r\n        this.eventHideListener = cc.eventManager.addCustomListener(cc.game.EVENT_HIDE, function (event) {\r\n            cc.log(\"进入后台\")\r\n            if (this.isNeedReconnect()) {\r\n                cc.audioEngine.stopAll()\r\n                cc.netMgr.onAppBack()\r\n            }\r\n        }.bind(this));\r\n        // //恢复显示 \r\n        this.eventShowListener = cc.eventManager.addCustomListener(cc.game.EVENT_SHOW, function (event) {\r\n            cc.log(\"进入前台\")\r\n            if (this.isNeedReconnect()) {\r\n                cc.netMgr.onAppFront()\r\n            }\r\n        }.bind(this));\r\n    },\r\n\r\n    //重连条件（分享的时候进入前台不需重连）\r\n    isNeedReconnect: function () {\r\n        return !(this.isViewOnOpen(\"prefabs/share/ShareView2\") || this.isViewOnOpen(\"prefabs/share/ShareView\"))\r\n    },\r\n\r\n    //设置切牌杆位置\r\n    setCutControlPos: function (pos) {\r\n        var cutCtrlNode = this.find(\"cutControl\")\r\n        cutCtrlNode.position = pos\r\n        cutCtrlNode.scaleX = pos.x / 240\r\n    },\r\n\r\n    start: function () {\r\n        this._super()\r\n        this.setRoomInfo()\r\n        var self = this\r\n\r\n        // this.find(\"nodeBtnOwner\").active = false\r\n        // this.find(\"nodeBtnPlayer\").active = false\r\n\r\n        //发牌test\r\n        // var ret = {}\r\n        // ret.player_cards_list = []\r\n        // ret.banker_cards_list = []\r\n        // ret.player_cards_list.push({cards : 13, type : 3})\r\n        // ret.player_cards_list.push({cards : 13, type : 3})\r\n        // ret.banker_cards_list.push({cards : 13, type : 3})\r\n        // ret.banker_cards_list.push({cards : 13, type : 3})\r\n        // this.dealCards(ret)\r\n\r\n        // //补牌test\r\n        // setTimeout(function () {\r\n        //     var ret = {}\r\n        //     ret.player_mend_cards = {cards : 13, type : 3}\r\n        //     ret.banker_mend_cards = {cards : 13, type : 3}\r\n        //     self.buCards(ret)\r\n        // }, 4000)\r\n\r\n        //挤牌test\r\n        // setTimeout(function () {\r\n        //     self.handleSqueeze({state : 2})\r\n        // }, 2500)\r\n        // setTimeout(function () {\r\n        //     self.buCardsTest()\r\n        // }, 4000)\r\n\r\n\r\n        // var card = cc.instantiate(cc.res[\"prefabs/card/Card\"])\r\n        // card.parent = this.node\r\n        // card.js.setSqueeze(false)\r\n        // this.testCard = card\r\n    },\r\n\r\n    //按照闲庄闲庄顺序发牌\r\n    dealCards: function (ret) {\r\n        // this.find(\"txtLeftCardsNum\").string = \"剩牌数:\" + ret.surplus_cards\r\n        var serverCardList = []\r\n        serverCardList.push(clone(ret.player_cards_list[0]))\r\n        serverCardList.push(clone(ret.player_cards_list[1]))\r\n        serverCardList.push(clone(ret.banker_cards_list[0]))\r\n        serverCardList.push(clone(ret.banker_cards_list[1]))\r\n        var secCfg = []\r\n        secCfg[1] = 0.7\r\n        secCfg[2] = 2.1\r\n        secCfg[3] = 1.4\r\n        secCfg[4] = 2.8\r\n        for (var i = 1; i <= 4; i++) {\r\n            // var self = this\r\n            var card = this.cardList[i]\r\n            card.active = true\r\n            card.js.setData(serverCardList[i - 1], i)\r\n            card.setRotation(58) //发牌器是旋转的，扑克也要旋转\r\n            var handle = function (card, i) {\r\n                scheduleTimeOut(function () {\r\n                    if (1 == i || 2 == i) {\r\n                        cc.musicMgr.playEffect(\"send_card_xian.mp3\")\r\n                    }\r\n                    else {\r\n                        cc.musicMgr.playEffect(\"send_card_zhuang.mp3\")\r\n                    }\r\n                    card.js.dealMove(this.find(\"posCard\" + i).node.position, function () {\r\n                        this.setLeftCardNum(this.leftCardNum - 1)\r\n                    }.bind(this))\r\n                }.bind(this), this, secCfg[i])\r\n            }.bind(this)\r\n            handle(card, i)\r\n        }\r\n    },\r\n\r\n    //补牌\r\n    buCards: function (ret) {\r\n        var serverCardList = []\r\n        serverCardList.push(clone(ret.player_mend_cards))\r\n        serverCardList.push(clone(ret.banker_mend_cards))\r\n        var secCfg = []\r\n        secCfg[5] = 0.7\r\n        secCfg[6] = 1.4\r\n        for (var i = 5; i <= 6; i++) {\r\n            var card = this.cardList[i]\r\n            if (serverCardList[i - 5]) {\r\n                card.active = true\r\n                card.js.setData(serverCardList[i - 5], i)\r\n                card.setRotation(58) //发牌器是旋转的，扑克也要旋转\r\n                var handle = function (card, i) {\r\n                    scheduleTimeOut(function () {\r\n                        if (5 == i) {\r\n                            cc.musicMgr.playEffect(\"bu_card_xian.mp3\")\r\n                            this.cardList[2].js.move(this.find(\"dieposCard2\").node.position)\r\n                        }\r\n                        else {\r\n                            cc.musicMgr.playEffect(\"bu_card_zhuang.mp3\")\r\n                            this.cardList[4].js.move(this.find(\"dieposCard4\").node.position)\r\n                        }\r\n                        card.js.dealMove(this.find(\"posCard\" + i).node.position, function () {\r\n                            this.setLeftCardNum(this.leftCardNum - 1)\r\n                        }.bind(this))\r\n                    }.bind(this), this, secCfg[i])\r\n                }.bind(this)\r\n                handle(card, i)\r\n            }\r\n        }\r\n    },\r\n\r\n    //获取翻开的牌的总点数 1庄 2闲\r\n    getCardTotalPoint: function (who) {\r\n        var list = []\r\n        if (1 == who) {\r\n            list.push(this.cardList[3])\r\n            list.push(this.cardList[4])\r\n            list.push(this.cardList[6])\r\n        }\r\n        else {\r\n            list.push(this.cardList[1])\r\n            list.push(this.cardList[2])\r\n            list.push(this.cardList[5])\r\n        }\r\n        var point = 0\r\n        //只计算已经翻开的牌\r\n        for (var i = 0; i < list.length; i++) {\r\n            var card = list[i]\r\n            if (card.js.isFront() && card.js.getCardNum() < 10) {\r\n                point += card.js.getCardNum()\r\n            }\r\n        }\r\n        return point % 10\r\n    },\r\n\r\n    //获取牌的总点数 1庄 2闲\r\n    newGetCardTotalPoint: function (who) {\r\n        var list = []\r\n        if (1 == who) {\r\n            list.push(this.cardList[3])\r\n            list.push(this.cardList[4])\r\n            list.push(this.cardList[6])\r\n        }\r\n        else {\r\n            list.push(this.cardList[1])\r\n            list.push(this.cardList[2])\r\n            list.push(this.cardList[5])\r\n        }\r\n        var point = 0\r\n        for (var i = 0; i < list.length; i++) {\r\n            var card = list[i]\r\n            if (card.js.getCardNum() < 10) {\r\n                point += card.js.getCardNum()\r\n            }\r\n        }\r\n        return point % 10\r\n    },\r\n\r\n    showScore: function () {\r\n        var isFlip = function (who) {\r\n            var list = []\r\n            //庄\r\n            if (1 == who) {\r\n                list.push(this.cardList[3])\r\n                list.push(this.cardList[4])\r\n                list.push(this.cardList[6])\r\n            }\r\n            else {\r\n                list.push(this.cardList[1])\r\n                list.push(this.cardList[2])\r\n                list.push(this.cardList[5])\r\n            }\r\n            for (var i = 0; i < list.length; i++) {\r\n                var card = list[i]\r\n                if (card.js.isFront()) {\r\n                    return true\r\n                }\r\n            }\r\n            return false\r\n        }.bind(this)\r\n\r\n        var xPoint = this.getCardTotalPoint(2)\r\n        var zPoint = this.getCardTotalPoint(1)\r\n        this.xianScore.string = xPoint\r\n        this.zhuangScore.string = zPoint\r\n        this.xianScore.node.active = isFlip(2)\r\n        this.zhuangScore.node.active = isFlip(1)\r\n    },\r\n\r\n    //获取要挤牌的卡，返回数组.1庄2闲\r\n    getNotOpenCard: function (ret) {\r\n        var notOpenCardList = []\r\n        for (var i = 0; i < ret.unopen_cards_list.length; i++) {\r\n            var index = clientCardIndex[ret.state][ret.unopen_cards_list[i]]\r\n            notOpenCardList.push(this.cardList[index])\r\n        }\r\n        return notOpenCardList\r\n    },\r\n\r\n    //处理挤牌\r\n    handleSqueeze: function (ret) {\r\n        var self = this\r\n        var notOpenCardList = this.getNotOpenCard(ret)\r\n\r\n        var isMyJipai = function () {\r\n            return cc.gameMgr.curJipaiPlayerUid == cc.gameMgr._myData.user_base_info.uid\r\n        }.bind(this)\r\n\r\n        var getJiNode = function (uid) {\r\n            var getPos = function () {\r\n                var player = this.getPlayerByUid(uid)\r\n                var seatId = player.getClientSeatId()\r\n                return this.find(\"nodeJi\" + seatId)\r\n            }.bind(this)\r\n\r\n            if (this.mgr.isRoomOwner()) {\r\n                var player = this.getPlayerByUid(uid)\r\n                var seatId = player.getClientSeatId()\r\n                if (seatId == 1) {\r\n                    return this.find(\"nodeJi0\")\r\n                }\r\n                return getPos()\r\n            } else {\r\n                return getPos()\r\n            }\r\n\r\n        }.bind(this)\r\n        scheduleTimeOut(function () {\r\n            if (1 == notOpenCardList.length) {\r\n                if (isMyJipai()) {\r\n                    notOpenCardList[0].js.moveToSqueeze({ x: 0, y: 0 })\r\n                }\r\n                else {\r\n                    var nodeJi = getJiNode(cc.gameMgr.curJipaiPlayerUid)\r\n                    notOpenCardList[0].js.moveToSqueeze(nodeJi.posJi1.node.position)\r\n                }\r\n            }\r\n            if (2 == notOpenCardList.length) {\r\n                var nodeJi = getJiNode(cc.gameMgr.curJipaiPlayerUid)\r\n                notOpenCardList[0].js.moveToSqueeze(nodeJi.posJi1.node.position)\r\n                notOpenCardList[1].js.moveToSqueeze(nodeJi.posJi2.node.position)\r\n            }\r\n        }.bind(this), this, 0.1)\r\n    },\r\n\r\n    //判断是否有一张牌在挤牌完成移动中（因为挤完牌会有一个移动的过程，这个时候后端通知另一边要挤牌，需要等移动回调再执行）\r\n    isExitOneCardOnMove: function () {\r\n        for (var i = 1; i <= 6; i++) {\r\n            if (this.cardList[i].js.isNeedJi() || this.cardList[i].js.isOnFlip()) {\r\n                return true\r\n            }\r\n        }\r\n        return false\r\n    },\r\n\r\n    setRoomInfo: function () {\r\n        // this.find(\"txtRoomId\").string = \"房间id：\" + gUserData.roomInfo.rid\r\n        this.find(\"txtRoomId\").string = \"房间号：\" + gUserData.roomInfo.room_num\r\n        this.mgr.setJushu(gUserData.roomInfo.inning_count)\r\n        var playerDataList = gUserData.roomInfo.seat_info_list\r\n        //设置房主UI\r\n        this.mgr.setRoomOwner({ seat: 0, user_base_info: clone(gUserData.roomInfo.owner_base_info) })\r\n        if (!this.mgr.isRoomOwner()) {\r\n            this.find(\"nodeTotalBetNum\").active = false\r\n            this.find(\"arrows\").active = false\r\n        }\r\n        else {\r\n            this.find(\"nodeTotalBetNum\").active = true\r\n            this.find(\"arrows\").active = true\r\n        }\r\n\r\n        this.mgr.setPlayerDatas(clone(playerDataList))\r\n        for (var i = 0; i < gUserData.roomInfo.user_win_total_list.length; i++) {\r\n            var user_profit = gUserData.roomInfo.user_win_total_list[i]\r\n            var player = this.getPlayerByUid(user_profit.uid)\r\n            player.setGoldNum(user_profit.win_jetton)\r\n        }\r\n        this.find(\"player0\").setGoldNum(gUserData.roomInfo.owner_win_total)\r\n\r\n        if (\"wait\" == gUserData.roomInfo.room_status) {\r\n            this.find(\"nodeBtnOwner\").active = this.mgr.isRoomOwner()\r\n            this.find(\"nodeBtnPlayer\").active = !this.mgr.isRoomOwner()\r\n            this.find(\"start_bg\").node.active = true\r\n        }\r\n        else {\r\n            this.find(\"nodeBtnOwner\").active = false\r\n            this.find(\"nodeBtnPlayer\").active = false\r\n            this.find(\"start_bg\").node.active = false\r\n        }\r\n        // if (1 == gUserData.roomInfo.room_setup_info.bet_limit_type) {\r\n        //     this.find(\"txtMaxBetNum\").string = \"最高:1千\"\r\n        //     this.find(\"txtMinBetNum\").string = \"最低:1\"\r\n        //     this.nodeChip1.active = true\r\n        // }\r\n        // else if (2 == gUserData.roomInfo.room_setup_info.bet_limit_type) {\r\n        //     this.find(\"txtMaxBetNum\").string = \"最高:1万\"\r\n        //     this.find(\"txtMinBetNum\").string = \"最低:10\"\r\n        //     this.nodeChip2.active = true\r\n        // }\r\n        this.find(\"txtMaxBetNum\").string = \"最高:\" + gUserData.roomInfo.room_setup_info.hig_bet\r\n        this.find(\"txtMinBetNum\").string = \"最低:\" + gUserData.roomInfo.room_setup_info.low_bet\r\n        this.nodeChip1.active = true\r\n        this.setLeftCardNum(gUserData.roomInfo.surplus_cards)\r\n\r\n        //设置筹码状态\r\n        var betInfoList = gUserData.roomInfo.user_betting_info_list\r\n        for (var i = 0; i < betInfoList.length; i++) {\r\n            var info = betInfoList[i]\r\n            var player = this.getPlayerByUid(info.uid)\r\n            player.setBetInfo(clone(info))\r\n        }\r\n\r\n        var view = this.openView(\"prefabs/wayBill/WayBillView\")\r\n        view.setData(gUserData.roomInfo.chess_cards_way_list)\r\n        view.hide()\r\n\r\n        this.mgr.handleRoomInfo()\r\n    },\r\n\r\n    dissolve: function () {\r\n        if (\"wait\" == gUserData.roomInfo.room_status) {\r\n            if (this.mgr.isRoomOwner()) {\r\n                cc.common.showMsgBox({\r\n                    type: 2, msg: \"是否解散房间，开局前解散房间不扣除钻石\", okCb: function () {\r\n                        this.mgr.reqRoomClose()\r\n                    }.bind(this),\r\n                    cancleCb: function () {\r\n\r\n                    }.bind(this),\r\n                })\r\n            }\r\n            else {\r\n                this.mgr.reqRoomLeave()\r\n            }\r\n        }\r\n    },\r\n\r\n    btnGameStart: function () {\r\n        this.mgr.reqStartGame()\r\n    },\r\n\r\n    //显示 切牌后的丢牌\r\n    showDiscard: function (flipCard) {\r\n        // var self = this\r\n        this.find(\"pokerDiscard\").active = true\r\n        cc.resMgr.updateSprite(this.find(\"discardFront\"), cc.resMgr.getCardResResultName({ type: flipCard.type, num: flipCard.cards, index: 1 }), true)\r\n        var num = flipCard.cards\r\n        if (num > 10) {\r\n            num = 10\r\n        }\r\n        cc.resMgr.updateSprite(this.find(\"discardBg\"), \"discardBg/poker_back_\" + num, true)\r\n        this.setLeftCardNum(this.leftCardNum - (num + 1))\r\n\r\n        scheduleTimeOut(function () {\r\n            this.find(\"pokerDiscard\").active = false\r\n        }.bind(this), this, 2)\r\n    },\r\n\r\n    getSelectChip: function () {\r\n        var nodeChipTarget\r\n        if (this.nodeChip1.active) {\r\n            nodeChipTarget = this.nodeChip1\r\n        } else {\r\n            nodeChipTarget = this.nodeChip2\r\n        }\r\n        for (var i = 1; i <= 5; i++) {\r\n            var chip = nodeChipTarget.getChildByName(\"chip\" + i)\r\n            if (chip.getComponent(cc.Toggle).isChecked) {\r\n                return chip\r\n            }\r\n        }\r\n    },\r\n\r\n    //获取场景的玩家\r\n    getPlayerByUid: function (uid) {\r\n        for (var i = 0; i <= 9; i++) {\r\n            // var player = this.find(\"player\" + i)\r\n            var player = this[\"player\" + i]\r\n            if (player.data && player.getUid() == uid) {\r\n                return player\r\n            }\r\n        }\r\n    },\r\n\r\n    compareCards: function (ret) {\r\n        var checkZXdui = function () {\r\n            //庄对\r\n            if (-1 != ret.state_info.state_list.indexOf(4)) {\r\n                this.find(\"aniZhuangdui\").active = true\r\n                this.find(\"aniZhuangdui\").getComponent(cc.Animation).play()\r\n                cc.musicMgr.playEffect(\"zhuangduixiandui.mp3\")\r\n            }\r\n            //闲对\r\n            if (-1 != ret.state_info.state_list.indexOf(5)) {\r\n                this.find(\"aniXiandui\").active = true\r\n                this.find(\"aniXiandui\").getComponent(cc.Animation).play()\r\n                cc.musicMgr.playEffect(\"zhuangduixiandui.mp3\")\r\n            }\r\n        }.bind(this)\r\n\r\n        //中途结算的比牌\r\n        if (0 == ret.is_last_compare_cards) {\r\n            checkZXdui()\r\n            this.midCompareFinish = true\r\n        }\r\n        else {\r\n            //如果已经中途结算过，那么庄对闲对特效已经播放过\r\n            if (!this.midCompareFinish) {\r\n                checkZXdui()\r\n            }\r\n            this.midCompareFinish = false\r\n            //因比牌时间短牌未翻完，导致之前计算点数的方法有问题，重写新方法获取点数。\r\n            //var xPoint = this.getCardTotalPoint(2)\r\n            //var zPoint = this.getCardTotalPoint(1)\r\n            var xPoint = this.newGetCardTotalPoint(2)\r\n            var zPoint = this.newGetCardTotalPoint(1)\r\n\r\n            if (-1 != ret.state_info.state_list.indexOf(7)) {\r\n                cc.musicMgr.playEffect(\"x_tian_\" + xPoint + \".mp3\")\r\n            }\r\n            else {\r\n                cc.musicMgr.playEffect(\"x\" + xPoint + \".mp3\")\r\n            }\r\n\r\n            if (ret.state_info.state_list && ret.state_info.state_list.indexOf(1) != -1) {\r\n                this.node_quanxian_zhuang.getComponent(\"PowerObj\").flip()\r\n            }\r\n            if (ret.state_info.state_list && ret.state_info.state_list.indexOf(2) != -1) {\r\n                this.node_quanxian_xian.getComponent(\"PowerObj\").flip()\r\n            }\r\n\r\n            scheduleTimeOut(function () {\r\n                if (-1 != ret.state_info.state_list.indexOf(6)) {\r\n                    cc.musicMgr.playEffect(\"z_tian_\" + zPoint + \".mp3\")\r\n                }\r\n                else {\r\n                    cc.musicMgr.playEffect(\"z\" + zPoint + \".mp3\")\r\n                }\r\n            }.bind(this), this, 2)\r\n\r\n            scheduleTimeOut(function () {\r\n                this.zhuangTianEffectPlay = false\r\n                this.xianTianEffectPlay = false\r\n                //庄方天牌\r\n                if (-1 != ret.state_info.state_list.indexOf(6)) {\r\n                    this.zhuangTianEffectPlay = true\r\n                    this.cardList[3].js.showTianPaiEffect()\r\n                    this.cardList[4].js.showTianPaiEffect()\r\n                    this.cardList[6].js.showTianPaiEffect()\r\n                    cc.musicMgr.playEffect(\"tianpai.mp3\")\r\n                }\r\n                //闲方天牌\r\n                if (-1 != ret.state_info.state_list.indexOf(7)) {\r\n                    this.xianTianEffectPlay = true\r\n                    this.cardList[1].js.showTianPaiEffect()\r\n                    this.cardList[2].js.showTianPaiEffect()\r\n                    this.cardList[5].js.showTianPaiEffect()\r\n                    cc.musicMgr.playEffect(\"tianpai.mp3\")\r\n                }\r\n                //庄赢\r\n                if (-1 != ret.state_info.state_list.indexOf(1)) {\r\n                    cc.director.getScheduler().schedule(function () {\r\n                        this.cardList[3].js.compare()\r\n                        this.cardList[4].js.compare()\r\n                        this.cardList[6].js.compare()\r\n                    }, this, 1, 0, 0, false);\r\n\r\n                    // this.cardList[3].js.showYingPaiEffect()\r\n                    // this.cardList[4].js.showYingPaiEffect()\r\n                    // this.cardList[6].js.showYingPaiEffect()\r\n                    cc.director.getScheduler().schedule(function () {\r\n                        this.showZhuangYingPaiEffect()\r\n                    }, this, 2, 0, 0, false);\r\n                }\r\n                //闲赢\r\n                if (-1 != ret.state_info.state_list.indexOf(2)) {\r\n                    cc.director.getScheduler().schedule(function () {\r\n                        this.cardList[1].js.compare()\r\n                        this.cardList[2].js.compare()\r\n                        this.cardList[5].js.compare()\r\n                    }, this, 1, 0, 0, false);\r\n\r\n                    // this.cardList[1].js.showYingPaiEffect()\r\n                    // this.cardList[2].js.showYingPaiEffect()\r\n                    // this.cardList[5].js.showYingPaiEffect()\r\n                    cc.director.getScheduler().schedule(function () {\r\n                        this.showXianYingPaiEffect()\r\n                    }, this, 2, 0, 0, false);\r\n                }\r\n                this.playChipAreaFlash(ret.state_info.state_list)\r\n            }.bind(this), this, 1)\r\n        }\r\n\r\n    },\r\n\r\n    showZhuangYingPaiEffect: function () {\r\n        this.yingPaiEffect.active = true\r\n        // var moveTo = cc.moveTo(0.5, this._zhuangCompareCardPos)\r\n        // var scaleTo = cc.scaleTo(0.5, 1.2)\r\n        // var spawn = cc.spawn(moveTo, scaleTo)\r\n        // this.find(\"zhuangYingPaiEffect\").runAction(spawn)\r\n\r\n        // if (this.zhuangTianEffectPlay) {\r\n        //     cc.director.getScheduler().schedule(function () {\r\n        //         cc.log(\"schedule赢牌特效\")\r\n        this.zhuangThanCardEffect.getComponent(cc.Animation).play()\r\n        this.zhuangCardParticle.resetSystem()\r\n        //    }, this, this.cardList[3].js.getTianPaiEffectPlayTime(), 0, 0, false);\r\n        //}\r\n        //else {\r\n        //    cc.log(\"赢牌特效\")\r\n        //     this.zhuangThanCardEffect.getComponent(cc.Animation).play()\r\n        //     this.zhuangCardParticle.resetSystem()\r\n        // }\r\n    },\r\n\r\n    showXianYingPaiEffect: function () {\r\n        this.yingPaiEffect.active = true\r\n        // var moveTo = cc.moveTo(0.5, this._xianCompareCardPos)\r\n        // var scaleTo = cc.scaleTo(0.5, 1.2)\r\n        // var spawn = cc.spawn(moveTo, scaleTo)\r\n        // this.find(\"xianYingPaiEffect\").runAction(spawn)\r\n\r\n        // if (this.xianTianEffectPlay) {\r\n        //     cc.director.getScheduler().schedule(function () {\r\n        //         cc.log(\"schedule赢牌特效\")\r\n        this.xianThanCardEffect.getComponent(cc.Animation).play()\r\n        this.xianCardParticle.resetSystem()\r\n        //     }, this, this.cardList[1].js.getTianPaiEffectPlayTime(), 0, 0, false);\r\n        // }\r\n        // else {\r\n        //     cc.log(\"赢牌特效\")\r\n        //     this.xianThanCardEffect.getComponent(cc.Animation).play()\r\n        //     this.xianCardParticle.resetSystem()\r\n        // }\r\n    },\r\n\r\n    testBet: function () {\r\n        //test 下注测试\r\n        this.find(\"nodeBtnOwner\").active = false\r\n        this.find(\"nodeBtnPlayer\").active = false\r\n        // var self = this\r\n        var addChip = function (ret) {\r\n            var player = this.getPlayerByUid(gUserData.uid)\r\n            var nodeName = clientBetState[ret.state]\r\n            if (1 == ret.state || 2 == ret.state) {\r\n                var seatId = player.getClientSeatId()\r\n                nodeName = nodeName + seatId\r\n            }\r\n            var value = player.getTotalChipValueArea(ret.state)\r\n            player.setChipsOnArea(value + ret.jetton, ret.state)\r\n        }.bind(this)\r\n        for (var i = 1; i <= 5; i++) {\r\n            addChip({ state: i, jetton: 5 })\r\n        }\r\n\r\n        scheduleTimeOut(function () {\r\n            var player = this.getPlayerByUid(gUserData.uid)\r\n            player.chipSettle({ state_list: [1] })\r\n        }.bind(this), this, 1.5)\r\n    },\r\n\r\n    showWayBill: function () {\r\n        var view = this.openView(\"prefabs/wayBill/WayBillView\")\r\n        // view.test()\r\n    },\r\n\r\n    //获取玩家下注筹码的父节点\r\n    getPlayerBetParent: function (seatId, area) {\r\n        var nodeName = clientBetState[area]\r\n        if (1 == area || 2 == area) {\r\n            nodeName = nodeName + seatId\r\n        }\r\n        var node\r\n        // var obj = this.find(nodeName)\r\n        var obj = this[nodeName]\r\n        if (cc.js.getClassName(obj) == \"cc.Node\") {\r\n            node = obj\r\n        } else {\r\n            node = obj.node\r\n        }\r\n        if (1 == area || 2 == area) {\r\n            return node.getChildByName(\"layout\")\r\n        } else {\r\n            // if (this.find(\"player\" + seatId).getUid() == gUserData.uid) {\r\n            if (this[\"player\" + seatId].getUid() == gUserData.uid) {\r\n                return node.getChildByName(\"layout_my\")\r\n            } else {\r\n                return node.getChildByName(\"layout_other\")\r\n            }\r\n        }\r\n    },\r\n\r\n    //设置庄家挤牌权\r\n    setBankerDelegate: function (uid) {\r\n        this.node_quanxian_zhuang.stopAllActions()\r\n        var zhuangPlayer = this.getPlayerByUid(uid)\r\n        if (zhuangPlayer) {\r\n            var dis = cc.pDistance(this.node_quanxian_zhuang.position, zhuangPlayer.node.position)\r\n            var time = Math.ceil(dis / 100) * 0.05\r\n            this.node_quanxian_zhuang.runAction(cc.moveTo(time, zhuangPlayer.node.position))\r\n        }\r\n        else {\r\n            // this.node_quanxian_zhuang.position = this.find(\"posZhuangPowerObj\").position\r\n            this.node_quanxian_zhuang.position = this.pos_quanxian_zhuang\r\n        }\r\n    },\r\n\r\n    setXianDelegate: function (uid) {\r\n        this.node_quanxian_xian.stopAllActions()\r\n        var xianPlayer = this.getPlayerByUid(uid)\r\n        if (xianPlayer) {\r\n            var dis = cc.pDistance(this.node_quanxian_xian.position, xianPlayer.node.position)\r\n            var time = Math.ceil(dis / 100) * 0.05\r\n            this.node_quanxian_xian.runAction(cc.moveTo(time, xianPlayer.node.position))\r\n        }\r\n        else {\r\n            // this.node_quanxian_xian.position = this.find(\"posXianPowerObj\").position\r\n            this.node_quanxian_xian.position = this.pos_quanxian_xian\r\n        }\r\n    },\r\n\r\n    showSettingView: function () {\r\n        var view = this.openView(\"prefabs/settingView/SettingView\")\r\n        //游戏还没开始，设置界面的解散按钮隐藏\r\n        if (\"wait\" == gUserData.roomInfo.room_status) {\r\n            view.find(\"btn_jrfj\").active = false\r\n        }\r\n        else {\r\n            view.find(\"btn_jrfj\").active = true\r\n        }\r\n        // this.playChipAreaFlash()\r\n    },\r\n\r\n    showChatView: function () {\r\n        var view = this.openView(\"prefabs/chat/ChatView\")\r\n    },\r\n\r\n    buCardsTest: function () {\r\n        // var self = this\r\n        var ret = {}\r\n        ret.player_mend_cards = []\r\n        ret.banker_mend_cards = []\r\n        // ret.player_mend_cards.push({cards : 13, type : 3})\r\n        // ret.banker_mend_cards.push({cards : 13, type : 3})\r\n        ret.player_mend_cards = { cards: 13, type: 3 }\r\n        ret.banker_mend_cards = { cards: 13, type: 3 }\r\n        this.buCards(ret)\r\n\r\n        scheduleTimeOut(function () {\r\n            this.handleSqueeze({ state: 2 })\r\n        }.bind(this), this, 2.5)\r\n    },\r\n\r\n    //更新筹码下注总数(仅房主显示)\r\n    updateTotalBetInfo: function () {\r\n        if (!this.mgr.isRoomOwner()) {\r\n            return\r\n        }\r\n        var txtList = []\r\n        txtList[1] = this.txtZhuangTotalBetNum\r\n        txtList[2] = this.txtXianTotalBetNum\r\n        txtList[3] = this.txtHeTotalBetNum\r\n        txtList[4] = this.txtZhuangduiTotalBetNum\r\n        txtList[5] = this.txtXianduiTotalBetNum\r\n        for (var i = 1; i <= 5; i++) {\r\n            var num = this.mgr.totalBetNumList[i]\r\n            txtList[i].string = num\r\n        }\r\n    },\r\n\r\n    onBtnWindow: function () {\r\n        // var view = cc.sceneNode.js.openView(\"prefabs/battleRecord/SingleBattleRecordView\")\r\n        // view.owner_uid = gUserData.roomInfo.owner_base_info.uid\r\n        // view.reqGameRecord(\"1000056\")\r\n\r\n        // this.isTest = !this.isTest\r\n        // if (this.isTest) {\r\n        //     cc.netMgr.onAppBack()\r\n        // }\r\n        // else {\r\n        //     cc.netMgr.onAppFront()\r\n        // }\r\n\r\n        GameToAppHelper.backToApp()\r\n    },\r\n\r\n    onBtnClearBet: function () {\r\n        this.mgr.reqClearBet()\r\n    },\r\n\r\n    onBtnConfirmBet: function () {\r\n        this.mgr.reqStopBet()\r\n        this.find(\"nodeChip\").active = false\r\n        this.find(\"player1\").hideTimer()\r\n    },\r\n\r\n    setLeftCardNum: function (num) {\r\n        this.leftCardNum = num\r\n        this.find(\"txtLeftCardsNum\").string = \"剩牌数:\" + num\r\n    },\r\n\r\n    onDestroy: function () {\r\n        this._super()\r\n        cc.log(\"onDestroy\", cc.eventManager)\r\n        cc.eventManager.removeListener(this.eventHideListener)\r\n        cc.eventManager.removeListener(this.eventShowListener)\r\n        //1.6版本有BUG，无法清除正在跑的计时器（naive平台），但是这行代码还是要保留\r\n        cc.director.getScheduler().unscheduleAllForTarget(this)\r\n    },\r\n\r\n    getNeedSqueezeCard: function () {\r\n        var list = []\r\n        for (var i = 1; i <= 6; i++) {\r\n            var card = this.cardList[i]\r\n            if (card.js.isNeedJi()) {\r\n                list.push(card)\r\n            }\r\n        }\r\n        return list\r\n    },\r\n\r\n    //翻牌按钮回调\r\n    onBtnFlipCard: function () {\r\n        var list = this.getNeedSqueezeCard()\r\n        for (var i = 0; i < list.length; i++) {\r\n            var card = list[i]\r\n            card.js.requestSqueeze()\r\n        }\r\n    },\r\n\r\n    //下注区域闪光的动画\r\n    playChipAreaFlash: function (state_list) {\r\n        if (-1 != state_list.indexOf(1)) {\r\n            this.light_zhuang.active = true\r\n            this.light_zhuang.opacity = 255\r\n            this.light_zhuang.getComponent(cc.Animation).play()\r\n        }\r\n        else if (-1 != state_list.indexOf(2)) {\r\n            this.light_xian.active = true\r\n            this.light_xian.opacity = 255\r\n            this.light_xian.getComponent(cc.Animation).play()\r\n        }\r\n        else if (-1 != state_list.indexOf(3)) {\r\n            this.light_he.active = true\r\n            this.light_he.opacity = 255\r\n            this.light_he.getComponent(cc.Animation).play()\r\n        }\r\n    },\r\n\r\n    //获取可以转移挤牌权的玩家列表(type1庄 2闲)\r\n    getCanMovePowerObjPlayers: function (type) {\r\n        var list = []\r\n        for (var i = 2; i <= 9; i++) {\r\n            // var player = this.find(\"player\" + i)\r\n            var player = this[\"player\" + i]\r\n            if (player.data && player.getTotalChipValueArea(type) != 0) {\r\n                list.push(player)\r\n            }\r\n        }\r\n        return list\r\n    },\r\n\r\n    onInviteFriends: function () {\r\n        cc.log(\"微信邀请好友！\")\r\n        GameToAppHelper.weChatRoomInvite()\r\n    },\r\n\r\n    onInviteDDFriends: function () {\r\n        cc.log(\"丁丁邀请好友！\")\r\n        GameToAppHelper.dingdingRoomInvite()\r\n    },\r\n\r\n    //处理审核\r\n    handleExamine: function () {\r\n        if (!IS_EXAMINE) {\r\n            return\r\n        }\r\n        this.find(\"btnDingding\").active = false\r\n        this.find(\"btnWechat\").active = false\r\n        this.find(\"btnDingding1\").active = false\r\n        this.find(\"btnWechat2\").active = false\r\n        this.find(\"btnLog\").active = false\r\n    },\r\n\r\n});\r\n"]}